<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Milo Pha ÄÃ¡</title>

  <link rel="stylesheet" href="effect.css" />
</head>

<body>
  <!-- Top actions -->
  <div class="top-actions">
    <button id="btnTheme" class="pill-btn" type="button">ğŸŒ™ Dark</button>
    <button id="btnAdmin" class="pill-btn" type="button">ğŸ”’ Admin</button>
  </div>

  <!-- Background -->
  <div class="bg" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card">

      <!-- COVER -->
      <div class="cover">
        <!-- cover.gif Ä‘áº·t cÃ¹ng thÆ° má»¥c -->
        <img id="coverImg" src="cover.gif" alt="cover" />
        <div class="coverShade" aria-hidden="true"></div>
      </div>

      <!-- PROFILE BAR -->
      <div class="profileBar">
        <!-- AVATAR + EFFECT -->
        <div class="avatar-wrap">
          <div class="ring" aria-hidden="true"></div>
          <img class="avatar" id="avatarImg" src="avatar.jpg" alt="avatar" />
          <!-- frame.png Ä‘áº·t cÃ¹ng thÆ° má»¥c; náº¿u khÃ´ng muá»‘n dÃ¹ng thÃ¬ xÃ³a dÃ²ng dÆ°á»›i -->
          <img class="frame" id="frameImg" src="frame.png" alt="frame" />
        </div>

        <!-- INFO -->
        <div class="info">
          <h1 class="name">Milo Pha ÄÃ¡ (Nháº¡t boy)</h1>
          <div class="sub">IT Student â€¢ Software Engineering</div>
          <div class="quote">â€œMá»™t gÃ³c nhá» trÃªn Internet cá»§a Milo.â€</div>

          <div class="chips">
            <span class="chip">ğŸ“ <span id="chipCity">Há»“ ChÃ­ Minh</span></span>
            <span class="chip">ğŸ‚ <span id="chipAge">19</span></span>
            <span class="chip">ğŸ® <span id="chipTag">gamer</span></span>
          </div>

          <!-- MUSIC (Ä‘Æ°a lÃªn dÆ°á»›i áº£nh Ä‘áº¡i diá»‡n / info, Ä‘áº¹p rÃµ rÃ ng) -->
          <div class="musicBox">
            <div class="musicTitleRow">
              <div class="musicTitleLabel">ğŸµ Nháº¡c tÃ´i nghe</div>
              <button id="btnEditMusic" class="mini-btn" type="button">âœï¸ Äá»•i tÃªn</button>
            </div>

            <div class="musicName" id="musicName">Ai ngoÃ i anh</div>
            <div class="musicHint">Báº¥m Play Ä‘á»ƒ nghe ğŸ§</div>

            <!-- music.mp3 Ä‘áº·t cÃ¹ng thÆ° má»¥c -->
            <audio id="audio" controls preload="metadata">
              <source src="music.mp3" type="audio/mpeg" />
            </audio>

            <div class="musicColorRow">
              <span class="label">MÃ u chá»¯ tÃªn nháº¡c:</span>
              <div class="seg">
                <button class="segBtn" data-musiccolor="white" type="button">âšª Tráº¯ng</button>
                <button class="segBtn" data-musiccolor="black" type="button">âš« Äen</button>
                <button class="segBtn" data-musiccolor="rainbow" type="button">ğŸŒˆ 7 sáº¯c</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- CONTENT GRID -->
      <div class="grid">
        <section class="panel">
          <h2>Giá»›i thiá»‡u</h2>
          <ul class="list">
            <li>âœ¨ Cháº¡y Ngay Äi</li>
            <li>ğŸ§¸ Cháº¡y VÃ o TrÃ¡i Tim Em</li>
            <li>ğŸ˜µâ€ğŸ’« ÄÃ¹a ThÃ´i Anh LÃ m GÃ¬ CÃ³ Em</li>
          </ul>
        </section>

        <section class="panel">
          <h2>Game mÃ¬nh hay chÆ¡i</h2>

          <div class="gameList">
            <a class="gameItem" id="linkRoblox" href="#" target="_blank" rel="noopener">
              <div class="gLeft">
                <div class="gName">ğŸ•¹ï¸ Roblox</div>
                <div class="gSub">chill / sandbox</div>
              </div>
              <span class="badge">casual</span>
            </a>

            <a class="gameItem" id="linkValorant" href="#" target="_blank" rel="noopener">
              <div class="gLeft">
                <div class="gName">ğŸ¯ Valorant</div>
                <div class="gSub">FPS / tryhard</div>
              </div>
              <span class="badge">rank</span>
            </a>

            <a class="gameItem" id="linkTFT" href="#" target="_blank" rel="noopener">
              <div class="gLeft">
                <div class="gName">ğŸ§  TFT</div>
                <div class="gSub">auto chess</div>
              </div>
              <span class="badge">brain</span>
            </a>
          </div>

          <div class="note">*Link game cÃ³ thá»ƒ chá»‰nh trong Admin ğŸ¤«</div>
        </section>

        <section class="panel wide">
          <h2>LiÃªn há»‡</h2>
          <div class="contactRow">
            <a class="contactBtn" id="btnFacebook" href="#" target="_blank" rel="noopener">ğŸŒ Facebook</a>
            <a class="contactBtn" id="btnDiscord" href="#" target="_blank" rel="noopener">ğŸ® Discord</a>
          </div>
        </section>

        <!-- POSTS / TUS -->
        <section class="panel wide">
          <div class="panelHead">
            <div>
              <h2>ğŸ“ ÄÃ¢y lÃ  nÆ¡i check cÃ¡c tus cá»§a tÃ´i</h2>
              <div class="subline">NgÆ°á»i xem chá»‰ báº¥m link â€¢ Admin má»›i thÃªm/xÃ³a ğŸ”’</div>
            </div>
            <button id="btnAddTus" class="pill-btn ghost" type="button">â• ThÃªm tus</button>
          </div>

          <div id="tusList" class="tusList"></div>
          <div class="note">*Tus lÃ  link báº¥m má»Ÿ trá»±c tiáº¿p, khá»i copy nhÃ© ğŸ˜</div>
        </section>
      </div>
    </section>
  </main>

  <!-- ADMIN MODAL -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle" id="modalTitle">ğŸ” Admin Panel</div>
        <button id="btnCloseModal" class="xBtn" type="button">âœ•</button>
      </div>

      <!-- LOGIN -->
      <div id="loginView">
        <div class="field">
          <label>Máº­t kháº©u admin</label>
          <input id="adminPass" type="password" placeholder="Nháº­p pass..." autocomplete="current-password" />
        </div>
        <div class="row">
          <button id="btnLogin" class="primary" type="button">âœ… VÃ o Admin</button>
          <span id="loginMsg" class="msg"></span>
        </div>
  
      </div>

      <!-- ADMIN CONTENT -->
      <div id="adminView" class="hidden">
        <div class="adminGrid">

          <div class="field">
            <label>Link Facebook (dÃ¡n link profile)</label>
            <input id="fbLink" type="url" placeholder="https://facebook.com/..." />
            <div class="tiny">NgÆ°á»i xem báº¥m Facebook lÃ  má»Ÿ link nÃ y.</div>
          </div>

          <div class="field">
            <label>Discord ID (chá»‰ cáº§n ID)</label>
            <input id="dcId" type="text" placeholder="9103..." inputmode="numeric" />
            <div class="tiny">Tá»± build link: discord.com/users/&lt;ID&gt;</div>
          </div>

          <div class="field">
            <label>Link Roblox (tÃ i khoáº£n)</label>
            <input id="robloxLink" type="url" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>

          <div class="field">
            <label>Link Valorant (tÃ i khoáº£n / tracker...)</label>
            <input id="valorantLink" type="url" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>

          <div class="field">
            <label>Link TFT (tÃ i khoáº£n / tracker...)</label>
            <input id="tftLink" type="url" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>

          <div class="field">
            <label>TÃªn bÃ i nháº¡c hiá»ƒn thá»‹</label>
            <input id="musicNameInput" type="text" placeholder="VÃ­ dá»¥: Ai ngoÃ i anh" />
          </div>

          <div class="field">
            <label>ThÃªm tus má»›i</label>
            <input id="tusTitle" type="text" placeholder="TÃªn tus (vd: Tus AV)" />
            <input id="tusUrl" type="url" placeholder="DÃ¡n link tus Facebook..." />
            <button id="btnSaveTus" class="primary" type="button">â• LÆ°u tus</button>
            <div class="tiny">Tus sáº½ hiá»‡n cho má»i ngÆ°á»i báº¥m má»Ÿ trá»±c tiáº¿p.</div>
          </div>
        </div>

        <div class="footerRow">
          <button id="btnSaveAll" class="primary" type="button">ğŸ’¾ LÆ°u cÃ i Ä‘áº·t</button>
          <button id="btnLogout" class="danger" type="button">ğŸšª ThoÃ¡t Admin</button>
          <span id="saveMsg" class="msg"></span>
        </div>
      </div>
    </div>
  </div>

<script>
/* =========================
   STORAGE + DEFAULTS
========================= */
const KEY = "milo_profile_v3";

const DEFAULTS = {
  theme: "dark",
  facebook: "https://facebook.com/",
  discordId: "910327589309145109",
  gameLinks: { roblox: "", valorant: "", tft: "" },
  musicName: "Ai ngoÃ i anh",
  musicColor: "rainbow",
  tus: [
    { title: "Tus AV", url: "https://www.facebook.com/" }
  ]
};

function loadData(){
  try{
    const raw = localStorage.getItem(KEY);
    if(!raw) return structuredClone(DEFAULTS);
    const parsed = JSON.parse(raw);
    return {
      ...structuredClone(DEFAULTS),
      ...parsed,
      gameLinks: { ...structuredClone(DEFAULTS.gameLinks), ...(parsed.gameLinks||{}) },
      tus: Array.isArray(parsed.tus) ? parsed.tus : structuredClone(DEFAULTS.tus)
    };
  }catch(e){
    return structuredClone(DEFAULTS);
  }
}
function saveData(data){
  localStorage.setItem(KEY, JSON.stringify(data));
}

let data = loadData();

/* =========================
   APPLY UI
========================= */
const $ = (s)=>document.querySelector(s);

function safeHref(url){
  if(!url) return "#";
  try{
    const u = new URL(url);
    return u.href;
  }catch{
    return "#";
  }
}

function applyAll(){
  // theme
  document.documentElement.dataset.theme = data.theme;

  // top buttons label
  $("#btnTheme").textContent = (data.theme === "dark") ? "ğŸŒ™ Dark" : "â˜€ï¸ Light";

  // contacts
  $("#btnFacebook").href = safeHref(data.facebook);

  const dc = (data.discordId || "").trim();
  $("#btnDiscord").href = dc ? `https://discord.com/users/${encodeURIComponent(dc)}` : "#";

  // games
  const gl = data.gameLinks || {};
  $("#linkRoblox").href = gl.roblox ? safeHref(gl.roblox) : "#";
  $("#linkValorant").href = gl.valorant ? safeHref(gl.valorant) : "#";
  $("#linkTFT").href = gl.tft ? safeHref(gl.tft) : "#";

  // disable empty links (so it doesn't look broken)
  ["#linkRoblox","#linkValorant","#linkTFT","#btnFacebook","#btnDiscord"].forEach(sel=>{
    const a = $(sel);
    if(a.getAttribute("href")==="#" || !a.getAttribute("href")){
      a.classList.add("disabledLink");
      a.addEventListener("click", (e)=>e.preventDefault(), { once:false });
    }else{
      a.classList.remove("disabledLink");
    }
  });

  // music
  $("#musicName").textContent = data.musicName || DEFAULTS.musicName;
  $("#musicName").classList.remove("mWhite","mBlack","mRainbow");
  if(data.musicColor==="white") $("#musicName").classList.add("mWhite");
  if(data.musicColor==="black") $("#musicName").classList.add("mBlack");
  if(data.musicColor==="rainbow") $("#musicName").classList.add("mRainbow");

  // tus list
  renderTus();
}

function renderTus(){
  const box = $("#tusList");
  box.innerHTML = "";
  const tus = Array.isArray(data.tus) ? data.tus : [];
  if(tus.length === 0){
    box.innerHTML = `<div class="empty">ChÆ°a cÃ³ tus nÃ o ğŸ˜­ (Admin thÃªm lÃ  xuáº¥t hiá»‡n ngay)</div>`;
    return;
  }

  tus.forEach((t, idx)=>{
    const wrap = document.createElement("div");
    wrap.className = "tusItem";

    const left = document.createElement("div");
    left.className = "tusLeft";

    const title = document.createElement("div");
    title.className = "tusTitle";
    title.textContent = t.title || `Tus ${idx+1}`;

    const link = document.createElement("a");
    link.className = "tusLink";
    link.href = safeHref(t.url || "");
    link.target = "_blank";
    link.rel = "noopener";
    link.textContent = t.url || "(chÆ°a cÃ³ link)";
    if(link.href === location.href + "#"){ link.classList.add("disabledLink"); link.addEventListener("click", (e)=>e.preventDefault()); }

    left.appendChild(title);
    left.appendChild(link);

    const right = document.createElement("div");
    right.className = "tusRight";

    const btnDel = document.createElement("button");
    btnDel.className = "danger small";
    btnDel.type = "button";
    btnDel.textContent = "ğŸ—‘ï¸ XÃ³a";
    btnDel.addEventListener("click", ()=>{
      if(!isAdmin()){ alert("Chá»‰ Admin má»›i xÃ³a Ä‘Æ°á»£c nha ğŸ˜¤"); return; }
      data.tus.splice(idx,1);
      saveData(data);
      renderTus();
    });

    right.appendChild(btnDel);
    wrap.appendChild(left);
    wrap.appendChild(right);

    box.appendChild(wrap);
  });
}

/* =========================
   THEME TOGGLE
========================= */
$("#btnTheme").addEventListener("click", ()=>{
  data.theme = (data.theme === "dark") ? "light" : "dark";
  saveData(data);
  applyAll();
});

/* =========================
   MUSIC COLOR + EDIT
========================= */
document.querySelectorAll("[data-musiccolor]").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    data.musicColor = btn.dataset.musiccolor;
    saveData(data);
    applyAll();
  });
});

$("#btnEditMusic").addEventListener("click", ()=>{
  const newName = prompt("Äá»•i tÃªn bÃ i nháº¡c hiá»ƒn thá»‹:", data.musicName || "");
  if(newName === null) return;
  data.musicName = newName.trim() || DEFAULTS.musicName;
  saveData(data);
  applyAll();
});

/* =========================
   ADMIN SESSION (simple gate)
========================= */
const ADMIN_PASS = "079268";
const ADMIN_KEY = "milo_admin_ok";

function isAdmin(){
  return sessionStorage.getItem(ADMIN_KEY) === "1";
}
function setAdmin(on){
  if(on) sessionStorage.setItem(ADMIN_KEY,"1");
  else sessionStorage.removeItem(ADMIN_KEY);
}

/* =========================
   MODAL
========================= */
const modal = $("#modal");
function openModal(){
  modal.classList.remove("hidden");
  document.body.classList.add("lock");
  // show correct view
  if(isAdmin()){
    $("#loginView").classList.add("hidden");
    $("#adminView").classList.remove("hidden");
    fillAdminInputs();
  }else{
    $("#loginView").classList.remove("hidden");
    $("#adminView").classList.add("hidden");
    $("#adminPass").value = "";
    $("#loginMsg").textContent = "";
  }
}
function closeModal(){
  modal.classList.add("hidden");
  document.body.classList.remove("lock");
}

$("#btnAdmin").addEventListener("click", openModal);
$("#btnCloseModal").addEventListener("click", closeModal);
modal.addEventListener("click", (e)=>{
  if(e.target === modal) closeModal();
});

/* =========================
   LOGIN
========================= */
$("#btnLogin").addEventListener("click", ()=>{
  const pass = $("#adminPass").value.trim();
  if(pass === ADMIN_PASS){
    setAdmin(true);
    $("#loginMsg").textContent = "OK âœ…";
    $("#loginView").classList.add("hidden");
    $("#adminView").classList.remove("hidden");
    fillAdminInputs();
  }else{
    $("#loginMsg").textContent = "Sai pass rá»“i bro ğŸ’€";
  }
});

/* =========================
   ADMIN INPUTS
========================= */
function fillAdminInputs(){
  $("#fbLink").value = data.facebook || "";
  $("#dcId").value = data.discordId || "";
  $("#robloxLink").value = (data.gameLinks?.roblox) || "";
  $("#valorantLink").value = (data.gameLinks?.valorant) || "";
  $("#tftLink").value = (data.gameLinks?.tft) || "";
  $("#musicNameInput").value = data.musicName || "";
  $("#tusTitle").value = "";
  $("#tusUrl").value = "";
  $("#saveMsg").textContent = "";
}

$("#btnSaveAll").addEventListener("click", ()=>{
  if(!isAdmin()){ alert("Chá»‰ Admin má»›i lÆ°u nha ğŸ˜¤"); return; }

  data.facebook = $("#fbLink").value.trim() || DEFAULTS.facebook;
  data.discordId = $("#dcId").value.trim() || DEFAULTS.discordId;
  data.gameLinks = {
    roblox: $("#robloxLink").value.trim(),
    valorant: $("#valorantLink").value.trim(),
    tft: $("#tftLink").value.trim()
  };
  data.musicName = $("#musicNameInput").value.trim() || DEFAULTS.musicName;

  saveData(data);
  $("#saveMsg").textContent = "ÄÃ£ lÆ°u âœ…";
  applyAll();
});

$("#btnLogout").addEventListener("click", ()=>{
  setAdmin(false);
  $("#saveMsg").textContent = "";
  closeModal();
});

/* =========================
   ADD TUS (must be admin)
========================= */
$("#btnAddTus").addEventListener("click", ()=>{
  if(!isAdmin()){
    openModal();
    alert("Muá»‘n thÃªm tus thÃ¬ vÃ o Admin trÆ°á»›c nha ğŸ”’");
    return;
  }
  openModal();
  // focus tus fields
  setTimeout(()=>$("#tusTitle").focus(), 150);
});

$("#btnSaveTus").addEventListener("click", ()=>{
  if(!isAdmin()){ alert("Chá»‰ Admin má»›i thÃªm Ä‘Æ°á»£c nha ğŸ˜¤"); return; }
  const title = $("#tusTitle").value.trim();
  const url = $("#tusUrl").value.trim();

  if(!title || !url){
    alert("Nháº­p Ä‘á»§ TÃªn tus + Link tus nha bro ğŸ˜­");
    return;
  }
  data.tus.unshift({ title, url });
  saveData(data);
  $("#tusTitle").value = "";
  $("#tusUrl").value = "";
  $("#saveMsg").textContent = "ÄÃ£ thÃªm tus âœ…";
  applyAll();
});

/* =========================
   INIT
========================= */
applyAll();
</script>
</body>
</html>
