<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Milo Pha ÄÃ¡</title>
  <link rel="stylesheet" href="effect.css" />
</head>

<body class="dark">
  <div class="bg"></div>

  <div class="wrap">
    <div class="top-actions">
      <div class="pill" id="btnTheme" role="button" aria-label="Toggle theme">
        ğŸŒ™ <span id="themeText">Dark</span>
      </div>
      <div class="pill" id="btnAdmin" role="button" aria-label="Open admin">
        ğŸ”’ <span id="adminText">Admin</span>
      </div>
    </div>

    <!-- HEADER -->
    <div class="card header">
      <img class="cover" src="cover.gif" alt="Cover" />

      <div class="header-inner">
        <div class="avatar-wrap">
          <img class="avatar" src="avatar.jpg" alt="Avatar" />
          <img class="avatar-frame" src="frame.png" alt="" />
        </div>

        <div class="who">
          <h1 class="name" id="nameText">Milo Pha ÄÃ¡ (Nhat boy)</h1>
          <div class="subtitle" id="subtitleText">IT Student â€¢ Software Engineering</div>
          <div class="quote" id="quoteText">â€œMá»™t gÃ³c nhá» trÃªn Internet cá»§a Milo.â€</div>

          <div class="chips">
            <div class="chip">ğŸ“ <span id="cityText">Há»“ ChÃ­ Minh</span></div>
            <div class="chip">ğŸ‚ <span id="ageText">19</span></div>
            <div class="chip">ğŸ® <span id="tagText">gamer</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- GRID -->
    <div class="grid">
      <div class="card section">
        <div class="h">ğŸ§ Nháº¡c tÃ´i nghe</div>
        <div class="music-title">Äang nghe: <span id="songName">Ai ngoÃ i anh</span></div>
        <p class="p">Báº¥m Play Ä‘á»ƒ nghe ğŸ§</p>
        <div style="height:10px"></div>
        <audio id="audio" controls src="music.mp3"></audio>
      </div>

      <div class="card section">
        <div class="h">ğŸ“Œ Giá»›i thiá»‡u</div>
        <div class="list" id="introList"></div>
      </div>

      <div class="card section">
        <div class="h">ğŸ® Game mÃ¬nh hay chÆ¡i</div>
        <div class="list" id="gameList"></div>
        <p class="help">Admin cÃ³ thá»ƒ dÃ¡n link tÃ i khoáº£n game Ä‘á»ƒ ngÆ°á»i xem báº¥m vÃ o.</p>
      </div>

      <div class="card section">
        <div class="h">ğŸ”— LiÃªn há»‡</div>
        <div class="contacts">
          <a class="contact-btn" id="fbBtn" href="#" target="_blank" rel="noopener">ğŸŒ Facebook</a>
          <a class="contact-btn" id="dcBtn" href="#" target="_blank" rel="noopener">ğŸ’¬ Discord</a>
        </div>
        <p class="help" id="dcHint">Discord: nháº­p ID lÃ  tá»± táº¡o link profile.</p>
      </div>
    </div>

    <!-- TUS -->
    <div class="card tus-box">
      <div class="tus-head">
        <div>ğŸ“ ÄÃ¢y lÃ  nÆ¡i check cÃ¡c tus cá»§a tÃ´i</div>
        <button class="btn btn-primary" id="btnAddTus">â• ThÃªm tus</button>
      </div>
      <p class="p">NgÆ°á»i xem chá»‰ báº¥m link â€¢ Admin má»›i thÃªm/xoÃ¡ ğŸ”’</p>
      <div class="tus-list" id="tusList"></div>
    </div>

    <!-- SCHEDULE -->
    <div class="card schedule">
      <div class="h">ğŸ“… Lá»‹ch báº­n / ráº£nh</div>
      <p class="p">Set theo tá»«ng ngÃ y trong tuáº§n âœ…</p>
      <div class="day-tabs" id="dayTabs"></div>
      <div id="daySlots"></div>
    </div>
  </div>

  <!-- ADMIN MODAL -->
  <div class="modal" id="adminModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true">
      <button class="modal-close" id="adminClose" aria-label="Close">âœ•</button>
      <h2 class="modal-title">ğŸ” Admin Panel</h2>

      <div class="field">
        <label>Máº­t kháº©u admin</label>
        <input id="adminPassInput" type="password" placeholder="Nháº­p pass..." />
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" id="btnLogin">âœ… Báº­t Admin</button>
        <button class="btn btn-danger" id="btnLogout">ğŸšª ThoÃ¡t Admin</button>
      </div>

      <hr style="border:none;border-top:1px solid var(--line);margin:14px 0">

      <!-- PHáº¦N DÆ¯á»šI CHá»ˆ HIá»†N KHI ÄÃƒ ÄÄ‚NG NHáº¬P -->
      <div id="adminLocked" class="admin-locked">
        <div class="row">
          <div class="field">
            <label>Link Facebook (dÃ¡n link profile)</label>
            <input id="fbInput" placeholder="https://facebook.com/..." />
          </div>
          <div class="field">
            <label>Discord ID (chá»‰ cáº§n ID)</label>
            <input id="dcIdInput" placeholder="9103..." />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Link Roblox (tÃ i khoáº£n)</label>
            <input id="robloxInput" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>
          <div class="field">
            <label>Link Valorant (tÃ i khoáº£n / tracker)</label>
            <input id="valoInput" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Link TFT (tÃ i khoáº£n / tracker)</label>
            <input id="tftInput" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>
          <div class="field">
            <label>TÃªn bÃ i nháº¡c hiá»ƒn thá»‹</label>
            <input id="songInput" placeholder="Ai ngoÃ i anh" />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Äá»•i máº­t kháº©u admin (tuá»³ chá»n)</label>
            <input id="newPassInput" placeholder="Äá»ƒ trá»‘ng náº¿u khÃ´ng Ä‘á»•i" />
          </div>
          <div class="field">
            <label>â€”</label>
            <div class="help">Tip: chá»‰ cáº§n Ä‘á»•i khi báº¡n muá»‘n.</div>
          </div>
        </div>

        <hr style="border:none;border-top:1px solid var(--line);margin:14px 0">

        <div class="row">
          <div class="field">
            <label>â• ThÃªm tus má»›i (Admin only)</label>
            <input id="tusTitleInput" placeholder="TÃªn tus (vd: Tus AV)" />
            <input id="tusLinkInput" placeholder="DÃ¡n link tus Facebook..." />
            <button class="btn btn-ghost" id="btnAddTusAdmin">â• ThÃªm tus</button>
          </div>

          <div class="field">
            <label>ğŸ“… Chá»‰nh lá»‹ch báº­n / ráº£nh (Admin only)</label>
            <select id="daySelect"></select>
            <div class="row" style="margin-top:0">
              <div class="field">
                <label>Tá»« giá»</label>
                <input id="fromInput" placeholder="09:00" />
              </div>
              <div class="field">
                <label>Äáº¿n giá»</label>
                <input id="toInput" placeholder="11:30" />
              </div>
            </div>
            <textarea id="taskInput" placeholder="Viá»‡c gÃ¬? (vd: Há»c PRF192 / Ä‘i gym / lÃ m bÃ i...)"></textarea>
            <button class="btn btn-ghost" id="btnAddSlot">â• ThÃªm lá»‹ch</button>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn btn-primary" id="btnSave">ğŸ’¾ LÆ°u cÃ i Ä‘áº·t</button>
        </div>
      </div>

    </div>
  </div>

  <script>
    // ====== STORAGE ======
    const LS_KEY = "milo_profile_v1";
    const loadState = () => {
      try { return JSON.parse(localStorage.getItem(LS_KEY) || "{}"); }
      catch(e){ return {}; }
    };
    const saveState = (s) => localStorage.setItem(LS_KEY, JSON.stringify(s));

    const DEFAULT = {
      theme: "dark",
      adminOn: false,
      adminPass: "1234",
      fb: "https://facebook.com/milo.pha.a",
      dcId: "910327589309145109",
      roblox: "",
      valo: "",
      tft: "",
      songName: "Ai ngoÃ i anh",
      intro: ["âœ¨ Cháº¡y Ngay Äi", "ğŸ» Cháº¡y VÃ o TrÃ¡i Tim Em", "ğŸ˜³ ÄÃ¹a ThÃ´i Anh LÃ m GÃ¬ CÃ³ Em"],
      games: [
        { name:"Roblox", desc:"chill / sandbox", tag:"casual", link:"" },
        { name:"Valorant", desc:"FPS / tryhard", tag:"rank", link:"" },
        { name:"TFT", desc:"auto chess", tag:"brain", link:"" }
      ],
      tus: [],
      schedule: {
        "Thá»© 2": [],
        "Thá»© 3": [],
        "Thá»© 4": [],
        "Thá»© 5": [],
        "Thá»© 6": [],
        "Thá»© 7": [],
        "Chá»§ nháº­t": []
      }
    };

    let state = { ...DEFAULT, ...loadState() };

    // ====== ELEMENTS ======
    const $ = (id) => document.getElementById(id);

    const btnTheme = $("btnTheme");
    const themeText = $("themeText");
    const btnAdmin = $("btnAdmin");
    const adminModal = $("adminModal");
    const adminClose = $("adminClose");
    const btnLogin = $("btnLogin");
    const btnLogout = $("btnLogout");
    const adminPassInput = $("adminPassInput");
    const adminLocked = $("adminLocked");

    const fbBtn = $("fbBtn");
    const dcBtn = $("dcBtn");
    const dcHint = $("dcHint");

    const introList = $("introList");
    const gameList = $("gameList");
    const tusList = $("tusList");
    const btnAddTus = $("btnAddTus");

    const dayTabs = $("dayTabs");
    const daySlots = $("daySlots");

    // admin inputs
    const fbInput = $("fbInput");
    const dcIdInput = $("dcIdInput");
    const robloxInput = $("robloxInput");
    const valoInput = $("valoInput");
    const tftInput = $("tftInput");
    const songInput = $("songInput");
    const newPassInput = $("newPassInput");
    const btnSave = $("btnSave");

    const tusTitleInput = $("tusTitleInput");
    const tusLinkInput = $("tusLinkInput");
    const btnAddTusAdmin = $("btnAddTusAdmin");

    const daySelect = $("daySelect");
    const fromInput = $("fromInput");
    const toInput = $("toInput");
    const taskInput = $("taskInput");
    const btnAddSlot = $("btnAddSlot");

    const songName = $("songName");

    // ====== THEME ======
    function applyTheme(){
      document.body.classList.toggle("light", state.theme === "light");
      document.body.classList.toggle("dark", state.theme !== "light");
      themeText.textContent = state.theme === "light" ? "Light" : "Dark";
    }

    btnTheme.addEventListener("click", () => {
      state.theme = (state.theme === "light") ? "dark" : "light";
      saveState(state);
      applyTheme();
    });

    // ====== ADMIN MODAL OPEN/CLOSE ======
    function openAdmin(){
      adminModal.classList.add("show");
      adminModal.setAttribute("aria-hidden","false");
      adminPassInput.focus();
    }
    function closeAdmin(){
      adminModal.classList.remove("show");
      adminModal.setAttribute("aria-hidden","true");
    }

    btnAdmin.addEventListener("click", openAdmin);
    adminClose.addEventListener("click", closeAdmin);
    adminModal.addEventListener("click", (e) => {
      if(e.target === adminModal) closeAdmin();
    });

    // ====== ADMIN LOGIN ======
    function applyAdminUI(){
      document.body.classList.toggle("admin-on", !!state.adminOn);
      adminLocked.style.display = state.adminOn ? "block" : "none";
    }

    btnLogin.addEventListener("click", () => {
      const pass = adminPassInput.value.trim();
      if(pass && pass === state.adminPass){
        state.adminOn = true;
        saveState(state);
        applyAdminUI();
      }else{
        alert("Sai máº­t kháº©u ğŸ˜­");
      }
    });

    btnLogout.addEventListener("click", () => {
      state.adminOn = false;
      saveState(state);
      applyAdminUI();
    });

    // ====== RENDER INTRO ======
    function renderIntro(){
      introList.innerHTML = "";
      state.intro.forEach(t => {
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `<div>${escapeHtml(t)}</div>`;
        introList.appendChild(div);
      });
    }

    // ====== RENDER GAMES ======
    function renderGames(){
      gameList.innerHTML = "";
      state.games.forEach(g => {
        const a = document.createElement(g.link ? "a" : "div");
        a.className = "item";
        if(g.link){
          a.href = g.link;
          a.target = "_blank";
          a.rel = "noopener";
          a.style.textDecoration = "none";
          a.style.color = "inherit";
        }
        a.innerHTML = `
          <div>
            <div style="font-weight:900">${escapeHtml(g.name)}</div>
            <div class="p" style="font-size:12px;margin-top:2px">${escapeHtml(g.desc || "")}</div>
            <div class="p" style="font-size:12px;margin-top:2px">${g.link ? "" : "ChÆ°a cÃ³ link"}</div>
          </div>
          <div class="tag">${escapeHtml(g.tag || "")}</div>
        `;
        gameList.appendChild(a);
      });
    }

    // ====== CONTACTS ======
    function renderContacts(){
      fbBtn.href = state.fb || "#";
      if(!state.fb) fbBtn.style.opacity = ".6";

      // Discord by ID
      const id = (state.dcId || "").trim();
      if(id){
        dcBtn.href = `https://discord.com/users/${encodeURIComponent(id)}`;
        dcHint.textContent = "Discord: nháº­p ID lÃ  tá»± táº¡o link profile.";
        dcBtn.style.opacity = "1";
      }else{
        dcBtn.href = "#";
        dcBtn.style.opacity = ".6";
        dcHint.textContent = "Discord: chÆ°a cÃ³ ID.";
      }
    }

    // ====== TUS ======
    function renderTus(){
      tusList.innerHTML = "";
      if(!state.tus.length){
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `<div class="p">ChÆ°a cÃ³ tus nÃ o ğŸ˜´</div>`;
        tusList.appendChild(div);
        return;
      }

      state.tus.forEach((t, idx) => {
        const a = document.createElement("a");
        a.className = "tus-link";
        a.href = t.link || "#";
        a.target = "_blank";
        a.rel = "noopener";
        a.innerHTML = `
          <div>ğŸ”— ${escapeHtml(t.title || "Tus")}</div>
          <div class="tag">Má»Ÿ</div>
        `;
        tusList.appendChild(a);
      });
    }

    btnAddTus.addEventListener("click", () => {
      if(!state.adminOn){
        alert("Chá»‰ Admin má»›i thÃªm tus nhÃ© ğŸ”’");
        return;
      }
      openAdmin();
      tusTitleInput.focus();
    });

    btnAddTusAdmin.addEventListener("click", () => {
      const title = tusTitleInput.value.trim();
      const link = tusLinkInput.value.trim();
      if(!title || !link){
        alert("Nháº­p Ä‘á»§ TÃªn tus + Link ğŸ˜­");
        return;
      }
      state.tus.unshift({ title, link });
      tusTitleInput.value = "";
      tusLinkInput.value = "";
      saveState(state);
      renderTus();
    });

    // ====== SCHEDULE ======
    const DAYS = ["Thá»© 2","Thá»© 3","Thá»© 4","Thá»© 5","Thá»© 6","Thá»© 7","Chá»§ nháº­t"];
    let activeDay = DAYS[0];

    function renderDayTabs(){
      dayTabs.innerHTML = "";
      DAYS.forEach(d => {
        const b = document.createElement("div");
        b.className = "tab" + (d === activeDay ? " active" : "");
        b.textContent = d;
        b.addEventListener("click", () => {
          activeDay = d;
          renderDayTabs();
          renderDaySlots();
        });
        dayTabs.appendChild(b);
      });
    }

    function renderDaySlots(){
      daySlots.innerHTML = "";
      const slots = state.schedule[activeDay] || [];
      if(!slots.length){
        const empty = document.createElement("div");
        empty.className = "slot";
        empty.innerHTML = `<div class="p">ğŸ˜´ ChÆ°a cÃ³ lá»‹ch cho ${escapeHtml(activeDay)}.</div>`;
        daySlots.appendChild(empty);
        return;
      }

      slots.forEach(s => {
        const div = document.createElement("div");
        div.className = "slot";
        div.innerHTML = `
          <div class="slot-left">
            <div class="slot-title">${escapeHtml(s.task || "Báº­n")}</div>
            <div class="slot-time">â° ${escapeHtml(s.from)} - ${escapeHtml(s.to)}</div>
          </div>
          <div class="tag">báº­n</div>
        `;
        daySlots.appendChild(div);
      });
    }

    function fillDaySelect(){
      daySelect.innerHTML = "";
      DAYS.forEach(d => {
        const opt = document.createElement("option");
        opt.value = d; opt.textContent = d;
        daySelect.appendChild(opt);
      });
    }

    btnAddSlot.addEventListener("click", () => {
      const d = daySelect.value;
      const from = fromInput.value.trim();
      const to = toInput.value.trim();
      const task = taskInput.value.trim();
      if(!d || !from || !to || !task){
        alert("Nháº­p Ä‘á»§: ngÃ y + tá»« giá» + Ä‘áº¿n giá» + viá»‡c ğŸ˜­");
        return;
      }
      if(!state.schedule[d]) state.schedule[d] = [];
      state.schedule[d].push({ from, to, task });
      fromInput.value = "";
      toInput.value = "";
      taskInput.value = "";
      saveState(state);
      activeDay = d;
      renderDayTabs();
      renderDaySlots();
    });

    // ====== SAVE SETTINGS ======
    function loadAdminInputs(){
      fbInput.value = state.fb || "";
      dcIdInput.value = state.dcId || "";
      robloxInput.value = state.roblox || "";
      valoInput.value = state.valo || "";
      tftInput.value = state.tft || "";
      songInput.value = state.songName || "";
      newPassInput.value = "";
    }

    btnSave.addEventListener("click", () => {
      if(!state.adminOn){
        alert("Báº¡n chÆ°a báº­t Admin ğŸ”’");
        return;
      }

      state.fb = fbInput.value.trim();
      state.dcId = dcIdInput.value.trim();
      state.roblox = robloxInput.value.trim();
      state.valo = valoInput.value.trim();
      state.tft = tftInput.value.trim();
      state.songName = songInput.value.trim() || DEFAULT.songName;

      const np = newPassInput.value.trim();
      if(np) state.adminPass = np;

      // update game links
      state.games = state.games.map(g => {
        if(g.name === "Roblox") return { ...g, link: state.roblox };
        if(g.name === "Valorant") return { ...g, link: state.valo };
        if(g.name === "TFT") return { ...g, link: state.tft };
        return g;
      });

      saveState(state);
      renderAll();
      alert("ÄÃ£ lÆ°u âœ…");
    });

    // ====== UTILS ======
    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // ====== RENDER ALL ======
    function renderAll(){
      applyTheme();
      applyAdminUI();
      loadAdminInputs();

      songName.textContent = state.songName || DEFAULT.songName;

      renderIntro();
      renderGames();
      renderContacts();
      renderTus();

      fillDaySelect();
      renderDayTabs();
      renderDaySlots();
    }

    // ====== INIT ======
    renderAll();
  </script>
</body>
</html>
