<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Milo Pha ƒê√°</title>

  <style>
    :root{
      --bg: rgba(255,255,255,.55);
      --card: rgba(255,255,255,.55);
      --card2: rgba(255,255,255,.45);
      --text: #0c1722;
      --muted: rgba(12,23,34,.65);
      --line: rgba(255,255,255,.45);
      --shadow: 0 18px 50px rgba(0,0,0,.18);
      --radius: 22px;
      --btn: rgba(255,255,255,.55);
      --btn2: rgba(0,0,0,.10);
      --accent: #2f7df6;
      --danger: #ff4d4d;
    }
    body.dark{
      --bg: rgba(15,22,32,.55);
      --card: rgba(22,30,44,.62);
      --card2: rgba(22,30,44,.50);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --line: rgba(255,255,255,.14);
      --shadow: 0 22px 60px rgba(0,0,0,.42);
      --btn: rgba(22,30,44,.72);
      --btn2: rgba(255,255,255,.10);
      --accent: #7bb0ff;
      --danger: #ff6b6b;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      overflow-x:hidden;
      background: #7cc7ff;
    }

    /* BG GIF full */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background: url("bg.gif") center/cover no-repeat;
      filter: blur(0px);
      transform: translateZ(0);
      z-index:-2;
    }
    /* soft overlay */
    body::after{
      content:"";
      position:fixed;
      inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.05));
      z-index:-1;
      pointer-events:none;
    }

    .wrap{
      width:min(1100px, 94vw);
      margin: 18px auto 40px;
      padding-bottom: 24px;
    }

    /* top actions */
    .top-actions{
      position: sticky;
      top: 10px;
      z-index: 50;
      display:flex;
      justify-content:flex-end;
      gap:10px;
      padding: 8px 0;
      pointer-events:none; /* IMPORTANT: tr√°nh overlay ƒÉn click */
    }
    .btn{
      pointer-events:auto; /* enable click */
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--btn), rgba(255,255,255,.25));
      color: var(--text);
      border-radius: 999px;
      padding: 10px 14px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
      box-shadow: 0 10px 26px rgba(0,0,0,.12);
      user-select:none;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      font-weight: 650;
    }
    .btn:active{ transform: scale(.98); }

    /* main card */
    .card{
      background: var(--bg);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }

    /* header */
    .cover{
      position:relative;
      height: 260px;
      background: #000;
      overflow:hidden;
    }
    .cover img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform: translateZ(0);
    }
    .profile-row{
      display:grid;
      grid-template-columns: 160px 1fr;
      gap: 18px;
      padding: 16px 18px 18px;
      align-items:center;
    }

    /* avatar frame */
    .avatarWrap{
      position:relative;
      width: 140px;
      height: 140px;
      margin-top: -70px; /* overlap cover */
      margin-left: 8px;
      flex: none;
    }
    .avatarWrap .avatar{
      position:absolute;
      inset: 18px;
      border-radius: 999px;
      object-fit: cover;
      width: calc(100% - 36px);
      height: calc(100% - 36px);
      border: 3px solid rgba(255,255,255,.75);
      background: rgba(0,0,0,.15);
    }
    .avatarWrap::after{
      content:"";
      position:absolute;
      inset:0;
      background: url("frame.png") center/contain no-repeat;
      pointer-events:none;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
    }

    .title h1{
      margin:0;
      font-size: clamp(22px, 3.6vw, 34px);
      line-height:1.12;
      letter-spacing:.2px;
    }
    .title .sub{
      margin-top:6px;
      color: var(--muted);
      font-weight: 600;
    }
    .title .quote{
      margin-top:8px;
      font-style: italic;
      color: var(--muted);
    }

    .chips{
      margin-top: 12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .chip{
      border:1px solid var(--line);
      background: var(--card2);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 650;
      display:inline-flex;
      align-items:center;
      gap:8px;
      color: var(--text);
    }

    /* grid content */
    .grid{
      padding: 14px 16px 18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
    }
    .panel{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: 18px;
      padding: 14px;
      min-height: 120px;
    }
    .panel h3{
      margin:0 0 10px;
      font-size: 16px;
    }
    .muted{ color: var(--muted); }

    /* music */
    .musicTitle{
      font-weight: 800;
      font-size: 22px;
      margin: 4px 0 2px;
      background: linear-gradient(90deg, #ff3b30, #ffcc00, #34c759, #0a84ff, #af52de);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .musicBox audio{ width:100%; }

    /* games */
    .gameList{ display:flex; flex-direction:column; gap:10px; }
    .gameItem{
      display:flex; align-items:center; justify-content:space-between;
      border:1px solid var(--line);
      background: var(--card2);
      border-radius: 14px;
      padding: 10px 12px;
      gap: 10px;
    }
    .gameItem .left{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
    }
    .gameItem .name{ font-weight:800; }
    .gameItem .desc{ font-size: 12.5px; color: var(--muted); }
    .pill{
      font-size: 12px;
      font-weight: 800;
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.35);
      white-space:nowrap;
    }
    body.dark .pill{ background: rgba(0,0,0,.18); }

    /* contacts */
    .contactsRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .contactBtn{
      flex:1;
      min-width: 140px;
      text-align:center;
      border:1px solid var(--line);
      background: var(--card2);
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 800;
      cursor:pointer;
      user-select:none;
    }
    .contactBtn:active{ transform: scale(.99); }

    /* tus */
    .tusBox{
      margin-top: 14px;
      padding: 14px 16px 18px;
    }
    .tusHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .tusList{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .tusItem{
      border:1px solid var(--line);
      background: var(--card2);
      border-radius: 16px;
      padding: 10px 12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
    }
    .tusItem a{
      color: var(--text);
      text-decoration:none;
      font-weight: 800;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: 75%;
    }
    .tusItem .small{
      font-size: 12px;
      color: var(--muted);
      font-weight:700;
    }
    .dangerBtn{
      border:1px solid rgba(255,0,0,.25);
      background: rgba(255,0,0,.10);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      font-weight:800;
    }

    /* schedule */
    .scheduleGrid{
      display:grid;
      grid-template-columns: repeat(7, minmax(140px, 1fr));
      gap: 10px;
      overflow:auto;
      padding-bottom: 4px;
    }
    .dayCol{
      border:1px solid var(--line);
      background: var(--card2);
      border-radius: 16px;
      padding: 10px;
      min-height: 120px;
    }
    .dayTitle{
      font-weight: 900;
      margin-bottom: 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .slot{
      border:1px dashed var(--line);
      border-radius: 12px;
      padding: 8px;
      margin-bottom: 8px;
      font-size: 13px;
    }
    .slot b{ font-weight: 900; }
    .slot .tag{
      font-weight:900;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border:1px solid var(--line);
      margin-left:6px;
    }

    /* modal */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 200;
    }
    .overlay.show{ display:flex; }
    .modal{
      width:min(820px, 96vw);
      background: var(--card);
      border:1px solid var(--line);
      border-radius: 22px;
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }
    .modalHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 12px 14px;
      border-bottom:1px solid var(--line);
      font-weight: 900;
    }
    .x{
      cursor:pointer;
      border:1px solid var(--line);
      background: var(--btn);
      border-radius: 12px;
      padding: 6px 10px;
      font-weight: 900;
    }
    .modalBody{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .field{
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    .field label{ font-weight: 900; }
    .field input, .field select, .field textarea{
      width:100%;
      border:1px solid var(--line);
      background: rgba(255,255,255,.35);
      color: var(--text);
      border-radius: 14px;
      padding: 10px 12px;
      outline:none;
      font-weight: 700;
    }
    body.dark .field input, body.dark .field select, body.dark .field textarea{
      background: rgba(0,0,0,.18);
    }
    .full{ grid-column: 1 / -1; }

    .rowBtns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      padding: 12px 14px 14px;
      border-top:1px solid var(--line);
    }
    .primary{
      background: linear-gradient(180deg, rgba(47,125,246,.95), rgba(47,125,246,.75));
      color:white;
      border: 1px solid rgba(255,255,255,.25);
    }
    .secondary{
      background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
      border: 1px solid var(--line);
    }
    body.dark .secondary{ background: rgba(255,255,255,.10); }

    /* rainbow */
    @keyframes hueSpin{ from{ filter:hue-rotate(0deg); } to{ filter:hue-rotate(360deg);} }
    body.rainbow *{
      animation: hueSpin 6s linear infinite;
    }
    body.rainbow .no-rainbow, body.rainbow .no-rainbow *{
      animation:none !important;
      filter:none !important;
    }

    /* responsive */
    @media (max-width: 860px){
      .profile-row{ grid-template-columns: 1fr; }
      .avatarWrap{ margin-top: -78px; margin-left: 6px; }
      .grid{ grid-template-columns: 1fr; }
      .modalBody{ grid-template-columns: 1fr; }
      .cover{ height: 220px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top-actions no-rainbow">
      <button class="btn" id="btnTheme" aria-label="toggle theme">üåô <span id="themeText">Dark</span></button>
      <button class="btn" id="btnAdmin" aria-label="open admin">üîí <span id="adminText">Admin</span></button>
    </div>

    <div class="card">
      <div class="cover">
        <img src="cover.gif" alt="cover" />
      </div>

      <div class="profile-row">
        <div class="avatarWrap no-rainbow">
          <img class="avatar" src="avatar.jpg" alt="avatar" />
        </div>

        <div class="title">
          <h1 id="nameText">Milo Pha ƒê√° (Nh·∫°t boy)</h1>
          <div class="sub" id="subText">IT Student ‚Ä¢ Software Engineering</div>
          <div class="quote" id="quoteText">‚ÄúM·ªôt g√≥c nh·ªè tr√™n Internet c·ªßa Milo.‚Äù</div>

          <div class="chips">
            <div class="chip" id="chipCity">üìç H·ªì Ch√≠ Minh</div>
            <div class="chip" id="chipAge">üéÇ 19</div>
            <div class="chip" id="chipTag">üéÆ gamer</div>
          </div>
        </div>
      </div>

      <div class="grid">
        <div class="panel musicBox">
          <h3>üéß Nh·∫°c t√¥i nghe</h3>
          <div class="muted">ƒêang nghe:</div>
          <div class="musicTitle" id="musicTitle">Ai ngo√†i anh</div>
          <div class="muted">B·∫•m Play ƒë·ªÉ nghe üéß</div>
          <div style="height:10px"></div>
          <audio id="player" controls src="music.mp3"></audio>
        </div>

        <div class="panel">
          <h3>üìå Gi·ªõi thi·ªáu</h3>
          <div class="muted" id="aboutText">Th√™m n·ªôi dung d∆∞·ªõi ƒë√¢y cho ƒë·ª° tr·ªëng n√® bro ü´∂</div>
          <div style="height:10px"></div>
          <div id="aboutList" class="muted">
            ‚Ä¢ ‚ú® Ch·∫°y Ngay ƒêi<br/>
            ‚Ä¢ üß∏ Ch·∫°y V√†o Tr√°i Tim Em<br/>
            ‚Ä¢ üò≠ ƒê√πa Th√¥i Anh L√†m G√¨ C√≥ Em
          </div>
        </div>

        <div class="panel">
          <h3>üéÆ Game m√¨nh hay ch∆°i</h3>
          <div class="gameList" id="gameList"></div>
          <div style="height:8px"></div>
          <div class="muted">Admin c√≥ th·ªÉ d√°n link t√†i kho·∫£n game ƒë·ªÉ ng∆∞·ªùi xem b·∫•m v√†o.</div>
        </div>

        <div class="panel">
          <h3>üîó Li√™n h·ªá</h3>
          <div class="contactsRow no-rainbow">
            <div class="contactBtn" id="btnFacebook">üåê Facebook</div>
            <div class="contactBtn" id="btnDiscord">üéÆ Discord</div>
          </div>
          <div style="height:10px"></div>
          <div class="muted" id="contactHint">B·∫•m ƒë·ªÉ m·ªü link tr·ª±c ti·∫øp.</div>
        </div>
      </div>

      <div class="tusBox">
        <div class="tusHead">
          <div>
            <b>üìù ƒê√¢y l√† n∆°i check c√°c tus c·ªßa t√¥i</b><br/>
            <span class="muted">Ng∆∞·ªùi xem ch·ªâ b·∫•m link ‚Ä¢ Admin m·ªõi th√™m/x√≥a üîí</span>
          </div>
          <button class="btn no-rainbow" id="btnAddTus">‚ûï Th√™m tus</button>
        </div>

        <div class="tusList" id="tusList"></div>
      </div>

      <div class="tusBox">
        <div class="tusHead">
          <div>
            <b>üìÖ L·ªãch b·∫≠n / r·∫£nh</b><br/>
            <span class="muted">Admin set th·ªùi gian b·∫≠n/r·∫£nh + vi·ªác mu·ªën l√†m.</span>
          </div>
          <button class="btn no-rainbow" id="btnEditSchedule">‚öôÔ∏è Ch·ªânh l·ªãch</button>
        </div>

        <div class="scheduleGrid" id="scheduleGrid"></div>
      </div>

    </div>
  </div>

  <!-- ADMIN MODAL -->
  <div class="overlay no-rainbow" id="overlay">
    <div class="modal">
      <div class="modalHead">
        <div>üîê Admin Panel</div>
        <button class="x" id="btnClose">‚úï</button>
      </div>

      <div class="modalBody">
        <div class="field full">
          <label>M·∫≠t kh·∫©u admin</label>
          <input id="passInput" type="password" placeholder="Nh·∫≠p pass..." />
          <div class="muted">Pass demo: <b>079268</b> (v√†o r·ªìi ƒë·ªïi pass ƒë∆∞·ª£c)</div>
        </div>

        <div class="field">
          <label>Facebook (d√°n link profile)</label>
          <input id="fbInput" placeholder="https://facebook.com/..." />
        </div>
        <div class="field">
          <label>Discord ID (ch·ªâ c·∫ßn ID)</label>
          <input id="dcInput" placeholder="9103..." />
        </div>

        <div class="field">
          <label>Link Roblox (t√†i kho·∫£n)</label>
          <input id="rbInput" placeholder="D√°n link (c√≥ th·ªÉ ƒë·ªÉ tr·ªëng)" />
        </div>
        <div class="field">
          <label>Link Valorant (t√†i kho·∫£n / tracker)</label>
          <input id="valoInput" placeholder="D√°n link (c√≥ th·ªÉ ƒë·ªÉ tr·ªëng)" />
        </div>

        <div class="field">
          <label>Link TFT (t√†i kho·∫£n / tracker)</label>
          <input id="tftInput" placeholder="D√°n link (c√≥ th·ªÉ ƒë·ªÉ tr·ªëng)" />
        </div>
        <div class="field">
          <label>T√™n b√†i nh·∫°c hi·ªÉn th·ªã</label>
          <input id="musicInput" placeholder="V√≠ d·ª•: Ai ngo√†i anh" />
        </div>

        <div class="field">
          <label>Rainbow ch·ªØ</label>
          <select id="rainbowSelect">
            <option value="off">T·∫Øt</option>
            <option value="on">B·∫≠t</option>
          </select>
          <div class="muted">B·∫≠t l√† to√†n web ƒë·ªïi m√†u li√™n t·ª•c üåà</div>
        </div>

        <div class="field">
          <label>ƒê·ªïi m·∫≠t kh·∫©u admin (tu·ª≥ ch·ªçn)</label>
          <input id="newPassInput" placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi" />
        </div>

        <div class="field full">
          <label>Th√™m tus m·ªõi (Admin only)</label>
          <input id="tusName" placeholder="T√™n tus (vd: Tus AV)" />
          <input id="tusLink" placeholder="D√°n link tus Facebook..." />
          <div class="muted">Tus s·∫Ω hi·ªán cho m·ªçi ng∆∞·ªùi b·∫•m m·ªü tr·ª±c ti·∫øp.</div>
        </div>

        <div class="field full">
          <label>Ch·ªânh l·ªãch b·∫≠n / r·∫£nh (Admin only)</label>
          <div class="muted">Format 1 d√≤ng = <b>Th·ªùi gian | Vi·ªác | b·∫≠n/r·∫£nh</b> (v√≠ d·ª•: <b>08:00-10:00 | H·ªçc PRF | b·∫≠n</b>)</div>
          <textarea id="scheduleEditor" rows="10" placeholder="Mon:&#10;08:00-10:00 | H·ªçc PRF | b·∫≠n&#10;19:00-21:00 | Gym | b·∫≠n&#10;&#10;Tue: ..."></textarea>
        </div>
      </div>

      <div class="rowBtns">
        <button class="btn secondary" id="btnLogout">üö™ Tho√°t Admin</button>
        <button class="btn primary" id="btnSave">üíæ L∆∞u c√†i ƒë·∫∑t</button>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // STORAGE + DEFAULTS
    // =========================
    const DEFAULT = {
      theme: "light",
      admin: false,
      adminPass: "079268",
      rainbow: false,

      facebook: "https://facebook.com/milo.pha.da",
      discordId: "910327589309145109",

      musicTitle: "Ai ngo√†i anh",

      links: {
        roblox: "",
        valorant: "",
        tft: ""
      },

      tus: [
        { name: "Tus m·∫´u 1", link: "https://facebook.com/" }
      ],

      schedule: {
        Mon: [
          { time: "08:00-10:00", task: "H·ªçc", status: "b·∫≠n" },
          { time: "20:00-22:00", task: "R·∫£nh ch∆°i game", status: "r·∫£nh" },
        ],
        Tue: [],
        Wed: [],
        Thu: [],
        Fri: [],
        Sat: [],
        Sun: []
      }
    };

    const KEY = "milo_profile_v3";

    function loadState(){
      try{
        const raw = localStorage.getItem(KEY);
        if(!raw) return structuredClone(DEFAULT);
        const parsed = JSON.parse(raw);

        // merge safe
        return {
          ...structuredClone(DEFAULT),
          ...parsed,
          links: { ...structuredClone(DEFAULT.links), ...(parsed.links||{}) },
          schedule: { ...structuredClone(DEFAULT.schedule), ...(parsed.schedule||{}) },
          tus: Array.isArray(parsed.tus) ? parsed.tus : structuredClone(DEFAULT.tus)
        };
      }catch(e){
        return structuredClone(DEFAULT);
      }
    }

    function saveState(){
      localStorage.setItem(KEY, JSON.stringify(state));
    }

    let state = loadState();

    // =========================
    // DOM
    // =========================
    const $ = (id)=>document.getElementById(id);

    const btnTheme = $("btnTheme");
    const btnAdmin = $("btnAdmin");
    const themeText = $("themeText");
    const adminText = $("adminText");

    const overlay = $("overlay");
    const btnClose = $("btnClose");

    const fbInput = $("fbInput");
    const dcInput = $("dcInput");
    const rbInput = $("rbInput");
    const valoInput = $("valoInput");
    const tftInput = $("tftInput");
    const musicInput = $("musicInput");
    const passInput = $("passInput");
    const newPassInput = $("newPassInput");
    const rainbowSelect = $("rainbowSelect");

    const btnSave = $("btnSave");
    const btnLogout = $("btnLogout");

    const btnFacebook = $("btnFacebook");
    const btnDiscord = $("btnDiscord");

    const musicTitle = $("musicTitle");

    const gameList = $("gameList");
    const tusList = $("tusList");
    const btnAddTus = $("btnAddTus");

    const tusName = $("tusName");
    const tusLink = $("tusLink");

    const scheduleGrid = $("scheduleGrid");
    const btnEditSchedule = $("btnEditSchedule");
    const scheduleEditor = $("scheduleEditor");

    // =========================
    // RENDER
    // =========================
    function applyTheme(){
      const isDark = state.theme === "dark";
      document.body.classList.toggle("dark", isDark);
      themeText.textContent = isDark ? "Light" : "Dark";
    }

    function applyRainbow(){
      document.body.classList.toggle("rainbow", !!state.rainbow);
    }

    function buildDiscordUrl(id){
      const clean = (id||"").trim();
      if(!clean) return "";
      return "https://discord.com/users/" + clean;
    }

    function renderContacts(){
      $("contactHint").textContent = "B·∫•m ƒë·ªÉ m·ªü link tr·ª±c ti·∫øp.";

      btnFacebook.onclick = ()=>{
        if(state.facebook) window.open(state.facebook, "_blank", "noopener");
      };
      btnDiscord.onclick = ()=>{
        const url = buildDiscordUrl(state.discordId);
        if(url) window.open(url, "_blank", "noopener");
      };
    }

    function renderGames(){
      const games = [
        { key:"roblox", icon:"üß∏", name:"Roblox", desc:"chill / sandbox", tag:"casual" },
        { key:"valorant", icon:"üéØ", name:"Valorant", desc:"FPS / tryhard", tag:"rank" },
        { key:"tft", icon:"üß†", name:"TFT", desc:"auto chess", tag:"brain" },
      ];

      gameList.innerHTML = "";
      games.forEach(g=>{
        const link = state.links[g.key] || "";
        const item = document.createElement("div");
        item.className = "gameItem";
        item.innerHTML = `
          <div class="left">
            <div class="name">${g.icon} ${g.name}</div>
            <div class="desc">${g.desc}${link ? " ‚Ä¢ c√≥ link" : ""}</div>
          </div>
          <div class="pill">${g.tag}</div>
        `;
        item.style.cursor = link ? "pointer" : "default";
        if(link){
          item.addEventListener("click", ()=> window.open(link, "_blank", "noopener"));
        }
        gameList.appendChild(item);
      });
    }

    function renderMusic(){
      musicTitle.textContent = state.musicTitle || "Nh·∫°c";
    }

    function renderTus(){
      tusList.innerHTML = "";
      const list = Array.isArray(state.tus) ? state.tus : [];

      if(list.length === 0){
        const empty = document.createElement("div");
        empty.className = "muted";
        empty.textContent = "Ch∆∞a c√≥ tus n√†o. Admin th√™m v√†o l√† x·ªãn li·ªÅn üòé";
        tusList.appendChild(empty);
        return;
      }

      list.forEach((t, idx)=>{
        const row = document.createElement("div");
        row.className = "tusItem";

        const left = document.createElement("div");
        left.style.minWidth = "0";
        left.innerHTML = `
          <div><a href="${t.link||"#"}" target="_blank" rel="noopener">${t.name||"Tus"}</a></div>
          <div class="small">${t.link||""}</div>
        `;

        const right = document.createElement("div");

        if(state.admin){
          const del = document.createElement("button");
          del.className = "dangerBtn";
          del.textContent = "üóëÔ∏è Xo√°";
          del.onclick = ()=>{
            state.tus.splice(idx,1);
            saveState();
            renderTus();
          };
          right.appendChild(del);
        }else{
          right.innerHTML = `<span class="small">üîí</span>`;
        }

        row.appendChild(left);
        row.appendChild(right);
        tusList.appendChild(row);
      });
    }

    const DAY_ORDER = ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];
    const DAY_VI = {Mon:"Th·ª© 2",Tue:"Th·ª© 3",Wed:"Th·ª© 4",Thu:"Th·ª© 5",Fri:"Th·ª© 6",Sat:"Th·ª© 7",Sun:"CN"};

    function renderSchedule(){
      scheduleGrid.innerHTML = "";
      DAY_ORDER.forEach(d=>{
        const col = document.createElement("div");
        col.className = "dayCol";
        col.innerHTML = `<div class="dayTitle">${DAY_VI[d]} <span class="muted">${(state.schedule[d]||[]).length} m·ª•c</span></div>`;
        const items = state.schedule[d] || [];
        if(items.length === 0){
          const p = document.createElement("div");
          p.className = "muted";
          p.textContent = "Tr·ªëng üò¥";
          col.appendChild(p);
        }else{
          items.forEach(s=>{
            const slot = document.createElement("div");
            slot.className = "slot";
            const st = (s.status||"").toLowerCase().includes("b·∫≠n") ? "b·∫≠n" : "r·∫£nh";
            slot.innerHTML = `
              <div><b>${s.time||"?"}</b> <span class="tag">${st}</span></div>
              <div class="muted">${s.task||""}</div>
            `;
            col.appendChild(slot);
          });
        }
        scheduleGrid.appendChild(col);
      });
    }

    // =========================
    // ADMIN MODAL
    // =========================
    function openAdmin(){
      // fill inputs
      fbInput.value = state.facebook || "";
      dcInput.value = state.discordId || "";
      rbInput.value = state.links.roblox || "";
      valoInput.value = state.links.valorant || "";
      tftInput.value = state.links.tft || "";
      musicInput.value = state.musicTitle || "";
      rainbowSelect.value = state.rainbow ? "on" : "off";

      // schedule editor text
      scheduleEditor.value = buildScheduleText();

      passInput.value = "";
      newPassInput.value = "";
      overlay.classList.add("show");
    }

    function closeAdmin(){
      overlay.classList.remove("show");
    }

    function buildScheduleText(){
      // Mon:\n08:00-10:00 | H·ªçc | b·∫≠n\n...
      let out = "";
      DAY_ORDER.forEach(d=>{
        out += d + ":\n";
        const items = state.schedule[d] || [];
        items.forEach(it=>{
          out += `${it.time||""} | ${it.task||""} | ${it.status||""}\n`;
        });
        out += "\n";
      });
      return out.trim();
    }

    function parseScheduleText(text){
      // returns schedule object
      const lines = (text||"").split("\n");
      const sch = {Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]};
      let cur = null;

      for(const raw of lines){
        const line = raw.trim();
        if(!line) continue;

        const dayMatch = line.replace(/\s/g,"").replace(":","").toLowerCase();
        const map = {mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"};
        if(map[dayMatch]){
          cur = map[dayMatch];
          continue;
        }
        if(!cur) continue;

        // time | task | status
        const parts = line.split("|").map(s=>s.trim());
        const time = parts[0] || "";
        const task = parts[1] || "";
        const status = (parts[2] || "b·∫≠n").toLowerCase().includes("r") ? "r·∫£nh" : (parts[2]||"b·∫≠n");
        if(time || task){
          sch[cur].push({ time, task, status });
        }
      }
      return sch;
    }

    function requireAdminOrAsk(){
      if(state.admin) return true;
      // open admin and focus pass
      openAdmin();
      setTimeout(()=>passInput.focus(), 150);
      return false;
    }

    function setAdmin(on){
      state.admin = !!on;
      adminText.textContent = state.admin ? "Admin ON" : "Admin";
      saveState();
      renderTus();
    }

    // =========================
    // EVENTS
    // =========================
    btnTheme.addEventListener("click", ()=>{
      state.theme = (state.theme === "dark") ? "light" : "dark";
      saveState();
      applyTheme();
    });

    btnAdmin.addEventListener("click", ()=>{
      openAdmin();
    });

    btnClose.addEventListener("click", closeAdmin);
    overlay.addEventListener("click", (e)=>{
      if(e.target === overlay) closeAdmin();
    });

    btnLogout.addEventListener("click", ()=>{
      setAdmin(false);
      closeAdmin();
    });

    btnSave.addEventListener("click", ()=>{
      const pass = passInput.value.trim();

      // if not admin yet => validate pass to enable admin
      if(!state.admin){
        if(pass !== state.adminPass){
          alert("Sai pass r·ªìi bro üíÄ");
          passInput.focus();
          return;
        }
        setAdmin(true);
      }

      // now admin can save settings
      state.facebook = fbInput.value.trim();
      state.discordId = dcInput.value.trim();

      state.links.roblox = rbInput.value.trim();
      state.links.valorant = valoInput.value.trim();
      state.links.tft = tftInput.value.trim();

      state.musicTitle = musicInput.value.trim() || "Nh·∫°c";

      state.rainbow = (rainbowSelect.value === "on");

      // change pass if provided
      const newP = newPassInput.value.trim();
      if(newP){
        state.adminPass = newP;
      }

      // add tus if filled
      const tn = tusName.value.trim();
      const tl = tusLink.value.trim();
      if(tn && tl){
        state.tus.unshift({ name: tn, link: tl });
        tusName.value = "";
        tusLink.value = "";
      }

      // schedule
      state.schedule = parseScheduleText(scheduleEditor.value);

      saveState();
      applyTheme();
      applyRainbow();
      renderContacts();
      renderGames();
      renderMusic();
      renderTus();
      renderSchedule();
      adminText.textContent = state.admin ? "Admin ON" : "Admin";

      alert("ƒê√£ l∆∞u c√†i ƒë·∫∑t ‚úÖ");
      closeAdmin();
    });

    btnAddTus.addEventListener("click", ()=>{
      if(!requireAdminOrAsk()) return;
      openAdmin();
      tusName.scrollIntoView({behavior:"smooth", block:"center"});
      setTimeout(()=>tusName.focus(), 200);
    });

    btnEditSchedule.addEventListener("click", ()=>{
      if(!requireAdminOrAsk()) return;
      openAdmin();
      scheduleEditor.scrollIntoView({behavior:"smooth", block:"center"});
      setTimeout(()=>scheduleEditor.focus(), 200);
    });

    // =========================
    // INIT
    // =========================
    function init(){
      // theme
      applyTheme();
      applyRainbow();

      // admin label
      adminText.textContent = state.admin ? "Admin ON" : "Admin";

      // contacts + games + music + tus + schedule
      renderContacts();
      renderGames();
      renderMusic();
      renderTus();
      renderSchedule();
    }
    init();
  </script>
</body>
</html>
