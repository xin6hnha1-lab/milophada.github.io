<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personal Profile</title>
  <style>
    /* Basic resets and typography */
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #ffffff;
      color: #222222;
    }
    h1, p {
      margin: 0;
    }
    /* Container for main content (except cover) */
    #main-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 0 15px 50px; /* side padding and bottom padding for spacing */
    }

    /* Cover image full-width container */
    #cover-container {
      width: 100%;
      overflow: hidden;
      /* (No fixed height; the image will dictate height) */
    }
    #cover-container img {
      width: 100%;
      height: auto;
      display: block;
    }

    /* Avatar styling */
    #avatar-container {
      width: 120px;
      height: 120px;
      margin: -60px auto 60px auto; /* pull up over cover, and add bottom space */
      position: relative;
      border: 4px solid #fff;
      border-radius: 50%;
      overflow: hidden;
      background: #ccc;
    }
    #avatar-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    /* Center text for profile info */
    #profile-name {
      text-align: center;
      font-size: 1.8em;
      font-weight: bold;
      margin-top: 10px;
    }
    #profile-desc {
      text-align: center;
      font-size: 1em;
      color: #555555;
      margin: 5px 0 15px 0;
    }
    #status-content {
      text-align: center;
      font-style: italic;
      margin: 10px 0;
    }
    #song-content {
      text-align: center;
      margin: 10px 0 20px 0;
    }
    #song-content span {
      /* inherits font styling, just a placeholder span for song name */
    }

    /* Social links section */
    #social-links {
      text-align: center;
      margin: 10px 0;
    }
    #social-links a {
      display: inline-block;
      margin: 0 10px;
      text-decoration: none;
    }
    /* Game links list */
    #game-links {
      list-style: none;
      padding: 0;
      margin: 20px 0 0 0;
      text-align: center;
    }
    #game-links li {
      margin: 5px 0;
    }
    #game-links a {
      color: #1a0dab; /* default link color (blue) or choose an accent color */
      text-decoration: underline;
    }

    /* Toggle buttons (Dark mode & Admin) */
    #toggle-container {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 9999;
    }
    .toggle-btn {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      margin-left: 5px;
      /* Light mode default style */
      background: #eeeeee;
      color: #000000;
    }
    .toggle-btn:focus { outline: none; }

    /* Dark mode styles */
    body.dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }
    body.dark-mode #profile-desc {
      color: #bbbbbb;
    }
    body.dark-mode a {
      color: #81a1ff; /* slightly lighter blue for links on dark */
    }
    body.dark-mode .toggle-btn {
      background: #333333;
      color: #ffffff;
    }

    /* Admin panel styles */
    #admin-panel {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 9998;
      padding: 20px;
      overflow-y: auto;
    }
    #admin-panel .panel-content {
      background: #f9f9f9;
      color: #000;
      max-width: 500px;
      margin: 50px auto;
      padding: 20px;
      border-radius: 8px;
    }
    #admin-panel h2 {
      margin-top: 0;
      text-align: center;
    }
    #admin-panel label {
      display: block;
      margin: 8px 0 4px;
      font-weight: bold;
    }
    #admin-panel input[type="text"] {
      width: 100%;
      padding: 6px 8px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #admin-panel #game-inputs .game-input-row {
      display: flex;
      gap: 5px;
      margin-bottom: 8px;
    }
    #admin-panel #game-inputs .game-input-row input {
      flex: 1;
      padding: 6px 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #admin-panel #add-game-btn {
      display: inline-block;
      margin: 5px 0 15px;
      padding: 6px 12px;
      font-size: 0.9em;
      cursor: pointer;
    }
    #admin-panel #save-btn {
      display: block;
      width: 100%;
      padding: 8px;
      font-size: 1em;
      font-weight: bold;
      color: #fff;
      background: #007acc;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    #admin-panel #save-btn:focus {
      outline: none;
    }

    /* Responsive adjustments */
    @media (min-width: 600px) {
      #avatar-container {
        width: 150px;
        height: 150px;
        margin-top: -75px;
        margin-bottom: 75px;
        border-width: 5px;
      }
      #profile-name {
        font-size: 2.2em;
      }
      #profile-desc {
        font-size: 1.1em;
      }
      .toggle-btn {
        font-size: 20px;
        width: 40px; height: 40px;
      }
    }
    @media (min-width: 1000px) {
      #avatar-container {
        width: 180px;
        height: 180px;
        margin-top: -90px;
        margin-bottom: 90px;
        border-width: 6px;
      }
      #profile-name {
        font-size: 2.5em;
      }
      #profile-desc {
        font-size: 1.2em;
      }
    }
  </style>
</head>
<body>

  <!-- Cover section -->
  <div id="cover-container">
    <img id="cover" src="cover.jpg" alt="Cover Image">
  </div>

  <!-- Main content container (avatar, text, links) -->
  <div id="main-container">
    <div id="avatar-container">
      <img id="avatar" src="avatar.jpg" alt="Avatar">
    </div>
    <h1 id="profile-name">Your Name</h1>
    <p id="profile-desc">M√¥ t·∫£ ng·∫Øn g·ªçn c·ªßa b·∫°n</p>

    <div id="social-links">
      <!-- Facebook and Discord icons as SVG -->
      <a id="fb-link" href="#" target="_blank" title="Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">
          <path fill="#1877F2" d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0 -0.002 3.603 -0.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/>
        </svg>
      </a>
      <a id="discord-link" href="#" target="_blank" title="Discord">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">
          <path fill="#5865F2" d="M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.022.021.037a13.3 13.3 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019q.463-.63.818-1.329a.05.05 0 0 0-.01-.059l-.018-.011a9 9 0 0 1-1.248-.595.05.05 0 0 1-.02-.066l.015-.019q.127-.095.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.05.05 0 0 1 .053.007q.121.1.248.195a.05.05 0 0 1-.004.085 8 8 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.2 13.2 0 0 0 4.001-2.02.05.05 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.03.03 0 0 0-.02-.019m-8.198 7.307c-.789 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"/>
        </svg>
      </a>
    </div>

    <p id="status-content"></p>
    <p id="song-content">ƒêang nghe: <span id="song-name-display"></span></p>

    <ul id="game-links"></ul>
  </div>

  <!-- Toggle buttons -->
  <div id="toggle-container">
    <button id="dark-toggle" class="toggle-btn" title="Toggle Dark Mode">üåô</button>
    <button id="admin-toggle" class="toggle-btn" title="Admin Mode (Edit)">‚öôÔ∏è</button>
  </div>

  <!-- Admin edit panel -->
  <div id="admin-panel">
    <div class="panel-content">
      <h2>Admin Edit Mode</h2>
      <label for="fb-input">Facebook URL ho·∫∑c ID:</label>
      <input type="text" id="fb-input" placeholder="https://facebook.com/YourID ho·∫∑c t√™n ID" />

      <label for="discord-input">Discord li√™n k·∫øt ho·∫∑c m√£:</label>
      <input type="text" id="discord-input" placeholder="https://discord.gg/Invite ho·∫∑c m√£ Invite" />

      <label for="status-input">Tr·∫°ng th√°i (Tus):</label>
      <input type="text" id="status-input" placeholder="Nh·∫≠p status c·ªßa b·∫°n" />

      <label for="song-input">T√™n b√†i nh·∫°c:</label>
      <input type="text" id="song-input" placeholder="Nh·∫≠p t√™n b√†i h√°t" />

      <label>Link game:</label>
      <div id="game-inputs">
        <!-- Game input rows will be added here -->
      </div>
      <button type="button" id="add-game-btn">+ Th√™m game</button>

      <button type="button" id="save-btn">L∆∞u & Tho√°t Admin</button>
    </div>
  </div>

  <script>
    // Admin password (change as needed)
    const ADMIN_PASSWORD = "admin";

    // Elements
    const darkToggle = document.getElementById('dark-toggle');
    const adminToggle = document.getElementById('admin-toggle');
    const body = document.body;
    const fbLinkAnchor = document.getElementById('fb-link');
    const discordLinkAnchor = document.getElementById('discord-link');
    const statusTextElem = document.getElementById('status-content');
    const songNameElem = document.getElementById('song-name-display');
    const gameLinksList = document.getElementById('game-links');
    const adminPanel = document.getElementById('admin-panel');
    const fbInput = document.getElementById('fb-input');
    const discordInput = document.getElementById('discord-input');
    const statusInput = document.getElementById('status-input');
    const songInput = document.getElementById('song-input');
    const gameInputsContainer = document.getElementById('game-inputs');
    const addGameBtn = document.getElementById('add-game-btn');
    const saveBtn = document.getElementById('save-btn');

    let isAdminMode = false;

    // Load stored settings on startup
    function loadSettings() {
      // Dark mode preference
      if (localStorage.getItem('darkMode') === 'true') {
        body.classList.add('dark-mode');
        darkToggle.textContent = '‚òÄ';
      } else {
        body.classList.remove('dark-mode');
        darkToggle.textContent = 'üåô';
      }
      // Facebook link
      const storedFB = localStorage.getItem('fbLink');
      if (storedFB) {
        updateSocialLink(fbLinkAnchor, storedFB, 'fb');
      }
      // Discord link
      const storedDiscord = localStorage.getItem('discordLink');
      if (storedDiscord) {
        updateSocialLink(discordLinkAnchor, storedDiscord, 'discord');
      }
      // Status text
      const storedStatus = localStorage.getItem('statusText');
      if (storedStatus) {
        statusTextElem.textContent = storedStatus;
      }
      // Song name
      const storedSong = localStorage.getItem('songName');
      if (storedSong) {
        songNameElem.textContent = storedSong;
      }
      // Game links array
      const storedGames = localStorage.getItem('gameLinks');
      if (storedGames) {
        try {
          const gamesArray = JSON.parse(storedGames);
          renderGameLinks(gamesArray);
        } catch (e) {
          console.error("Error parsing game links from storage:", e);
        }
      }
    }

    // Render game links to the #game-links list
    function renderGameLinks(gamesArray) {
      gameLinksList.innerHTML = '';
      if (gamesArray && gamesArray.length > 0) {
        gamesArray.forEach(game => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = game.url;
          a.target = "_blank";
          a.textContent = game.name;
          li.appendChild(a);
          gameLinksList.appendChild(li);
        });
      }
    }

    // Helper to update anchor href based on input (handles prefixing)
    function updateSocialLink(anchorElem, userInput, type) {
      let href = userInput.trim();
      if (!href) {
        anchorElem.href = "#";
        return;
      }
      if (!href.startsWith('http')) {
        // If userInput is not a full URL, prefix based on type
        if (type === 'fb') {
          if (href.indexOf('facebook.com') !== -1) {
            // user included "facebook.com" but no protocol
            href = 'https://' + href;
          } else {
            href = 'https://facebook.com/' + href;
          }
        } else if (type === 'discord') {
          if (href.indexOf('discord.gg') !== -1 || href.indexOf('discord.com') !== -1) {
            href = 'https://' + href;
          } else {
            href = 'https://discord.gg/' + href;
          }
        }
      }
      anchorElem.href = href;
    }

    // Enter admin mode: show panel with current values
    function enterAdminMode() {
      isAdminMode = true;
      // Populate inputs with current data
      fbInput.value = localStorage.getItem('fbLink') || '';
      discordInput.value = localStorage.getItem('discordLink') || '';
      statusInput.value = localStorage.getItem('statusText') || '';
      songInput.value = localStorage.getItem('songName') || '';
      // Populate game links inputs
      gameInputsContainer.innerHTML = '';
      const storedGames = localStorage.getItem('gameLinks');
      let gamesArray = [];
      try {
        gamesArray = storedGames ? JSON.parse(storedGames) : [];
      } catch {
        gamesArray = [];
      }
      // Create an input row for each existing game link
      gamesArray.forEach((game, idx) => {
        addGameInputRow(game.name, game.url);
      });
      // Add one empty row for new entry
      addGameInputRow('', '');
      // Show admin panel
      adminPanel.style.display = 'block';
    }

    // Exit admin mode: hide panel and optionally save changes
    function exitAdminMode(saveChanges = true) {
      isAdminMode = false;
      adminPanel.style.display = 'none';
      if (saveChanges) {
        // Save all input values to localStorage and update UI
        const newFB = fbInput.value.trim();
        const newDiscord = discordInput.value.trim();
        const newStatus = statusInput.value.trim();
        const newSong = songInput.value.trim();
        // Gather game links from inputs
        const gameRows = gameInputsContainer.querySelectorAll('.game-input-row');
        const newGames = [];
        gameRows.forEach(row => {
          const nameInput = row.querySelector('input[name="game-name"]');
          const urlInput = row.querySelector('input[name="game-url"]');
          if (!nameInput || !urlInput) return;
          const nameVal = nameInput.value.trim();
          const urlVal = urlInput.value.trim();
          if (nameVal && urlVal) {
            newGames.push({ name: nameVal, url: urlVal });
          }
        });
        // Save to localStorage
        localStorage.setItem('fbLink', newFB);
        localStorage.setItem('discordLink', newDiscord);
        localStorage.setItem('statusText', newStatus);
        localStorage.setItem('songName', newSong);
        localStorage.setItem('gameLinks', JSON.stringify(newGames));
        // Update UI elements
        updateSocialLink(fbLinkAnchor, newFB, 'fb');
        updateSocialLink(discordLinkAnchor, newDiscord, 'discord');
        statusTextElem.textContent = newStatus;
        songNameElem.textContent = newSong;
        renderGameLinks(newGames);
      }
    }

    // Add a row of inputs for a game link in admin panel
    function addGameInputRow(nameVal, urlVal) {
      const rowDiv = document.createElement('div');
      rowDiv.className = 'game-input-row';
      const nameInput = document.createElement('input');
      nameInput.type = 'text';
      nameInput.name = 'game-name';
      nameInput.placeholder = 'T√™n Game';
      nameInput.value = nameVal || '';
      const urlInput = document.createElement('input');
      urlInput.type = 'text';
      urlInput.name = 'game-url';
      urlInput.placeholder = 'URL Game';
      urlInput.value = urlVal || '';
      rowDiv.appendChild(nameInput);
      rowDiv.appendChild(urlInput);
      gameInputsContainer.appendChild(rowDiv);
    }

    // Event Listeners
    darkToggle.addEventListener('click', () => {
      if (body.classList.contains('dark-mode')) {
        body.classList.remove('dark-mode');
        localStorage.setItem('darkMode', 'false');
        darkToggle.textContent = 'üåô';
      } else {
        body.classList.add('dark-mode');
        localStorage.setItem('darkMode', 'true');
        darkToggle.textContent = '‚òÄ';
      }
    });

    adminToggle.addEventListener('click', () => {
      if (!isAdminMode) {
        const pwd = prompt("Nh·∫≠p m·∫≠t kh·∫©u Admin:");
        if (pwd !== null && pwd === ADMIN_PASSWORD) {
          enterAdminMode();
        } else if (pwd !== null) {
          alert("M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!");
        }
      } else {
        // If already in admin mode, clicking again will exit (without saving by default)
        exitAdminMode(false);
      }
    });

    addGameBtn.addEventListener('click', () => {
      addGameInputRow('', '');
    });

    saveBtn.addEventListener('click', () => {
      exitAdminMode(true);
    });

    // Clicking outside the panel content closes admin mode (optional)
    adminPanel.addEventListener('click', (e) => {
      if (e.target === adminPanel) {
        // Clicked on overlay, close without saving
        exitAdminMode(false);
      }
    });

    // Initialize on load
    loadSettings();
  </script>
</body>
</html>
