<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Milo Pha ÄÃ¡</title>

  <!-- Link CSS ngoÃ i -->
  <link rel="stylesheet" href="effect.css" />
</head>

<body class="dark">
  <!-- background chá»‰ 1 láº§n -->
  <div class="bg"></div>

  <div class="wrap">

    <!-- TOP BUTTONS -->
    <div class="top-actions">
      <div class="pill" id="btnTheme" role="button" aria-label="Toggle theme">
        ğŸŒ™ <span id="themeText">Dark</span>
      </div>
      <div class="pill" id="btnAdmin" role="button" aria-label="Open admin">
        ğŸ”’ <span id="adminText">Admin</span>
      </div>
    </div>

    <!-- HEADER CARD -->
    <div class="card header">
      <img class="cover" src="cover.gif" alt="Cover" />

      <div class="header-inner">
        <!-- avatar -->
        <div class="avatar-wrap">
          <img class="avatar" src="avatar.jpg" alt="Avatar" />
          <img class="avatar-frame" src="frame.png" alt="Frame" />
        </div>

        <!-- text -->
        <div class="who">
          <h1 class="name" id="nameText">Milo Pha ÄÃ¡ (Nhat boy)</h1>
          <div class="subtitle" id="subtitleText">IT Student â€¢ Software Engineering</div>
          <div class="quote" id="quoteText">â€œMá»™t gÃ³c nhá» trÃªn Internet cá»§a Milo.â€</div>

          <div class="chips">
            <div class="chip">ğŸ“ <span id="cityText">Há»“ ChÃ­ Minh</span></div>
            <div class="chip">ğŸ‚ <span id="ageText">19</span></div>
            <div class="chip">ğŸ® <span id="tagText">gamer</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- MAIN GRID -->
    <div class="grid">

      <div class="card section">
        <div class="h">ğŸ§ Nháº¡c tÃ´i nghe</div>
        <div class="music-title">Äang nghe: <span id="songName">Ai ngoÃ i anh</span></div>
        <div class="p">Báº¥m Play Ä‘á»ƒ nghe ğŸ§</div>
        <div style="height:10px"></div>
        <audio id="audio" controls src="music.mp3"></audio>
      </div>

      <div class="card section">
        <div class="h">ğŸ“Œ Giá»›i thiá»‡u</div>
        <div class="list" id="introList"></div>
      </div>

      <div class="card section">
        <div class="h">ğŸ® Game mÃ¬nh hay chÆ¡i</div>
        <div class="list" id="gameList"></div>
        <p class="help">Admin cÃ³ thá»ƒ dÃ¡n link tÃ i khoáº£n game Ä‘á»ƒ ngÆ°á»i xem báº¥m vÃ o.</p>
      </div>

      <div class="card section">
        <div class="h">ğŸ”— LiÃªn há»‡</div>
        <div class="contacts">
          <a class="contact-btn" id="fbBtn" href="#" target="_blank" rel="noopener">ğŸŒ Facebook</a>
          <a class="contact-btn" id="dcBtn" href="#" target="_blank" rel="noopener">ğŸ’¬ Discord</a>
        </div>
        <p class="help">Discord: nháº­p ID lÃ  tá»± táº¡o link profile.</p>
      </div>

    </div>

    <!-- TUS -->
    <div class="card tus-box">
      <div class="tus-head">
        <div>ğŸ“ ÄÃ¢y lÃ  nÆ¡i check cÃ¡c tus cá»§a tÃ´i</div>
        <button class="btn btn-primary" id="btnAddTus">â• ThÃªm tus</button>
      </div>
      <div class="p">NgÆ°á»i xem chá»‰ báº¥m link â€¢ Admin má»›i thÃªm/xoÃ¡ ğŸ”’</div>
      <div style="height:10px"></div>
      <div class="tus-list" id="tusList"></div>
    </div>

    <!-- SCHEDULE -->
    <div class="card schedule">
      <div class="h">ğŸ“… Lá»‹ch báº­n / ráº£nh</div>
      <div class="p">Set theo tá»«ng ngÃ y trong tuáº§n âœ…</div>
      <div style="height:10px"></div>
      <div class="day-tabs" id="dayTabs"></div>
      <div id="daySlots"></div>
    </div>

  </div>

  <!-- ADMIN MODAL -->
  <div class="modal" id="adminModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true">
      <button class="modal-close" id="adminClose" aria-label="Close">âœ•</button>
      <h2 class="modal-title">ğŸ” Admin Panel</h2>

      <!-- LOGIN AREA -->
      <div class="field">
        <label>Máº­t kháº©u admin</label>
        <input id="adminPassInput" type="password" placeholder="Nháº­p pass..." />
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" id="btnLogin">âœ… ÄÄƒng nháº­p</button>
        <button class="btn btn-danger" id="btnLogout">ğŸšª ThoÃ¡t Admin</button>
      </div>

      <hr style="border:none;border-top:1px solid var(--line);margin:14px 0">

      <!-- LOCKED AREA (chá»‰ hiá»‡n khi admin ON) -->
      <div class="admin-locked" id="adminLocked">

        <div class="row">
          <div class="field">
            <label>Link Facebook (dÃ¡n link profile)</label>
            <input id="fbInput" placeholder="https://facebook.com/..." />
          </div>
          <div class="field">
            <label>Discord ID (chá»‰ cáº§n ID)</label>
            <input id="dcIdInput" placeholder="9103..." />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Link Roblox (tÃ i khoáº£n)</label>
            <input id="robloxInput" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>
          <div class="field">
            <label>Link Valorant (tÃ i khoáº£n / tracker)</label>
            <input id="valoInput" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Link TFT (tÃ i khoáº£n / tracker)</label>
            <input id="tftInput" placeholder="DÃ¡n link (cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng)" />
          </div>
          <div class="field">
            <label>TÃªn bÃ i nháº¡c hiá»ƒn thá»‹</label>
            <input id="songInput" placeholder="Ai ngoÃ i anh" />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Äá»•i máº­t kháº©u admin (tuá»³ chá»n)</label>
            <input id="newPassInput" placeholder="Äá»ƒ trá»‘ng náº¿u khÃ´ng Ä‘á»•i" />
            <div class="help">Nháº­p pass má»›i rá»“i báº¥m â€œLÆ°u cÃ i Ä‘áº·tâ€.</div>
          </div>
          <div class="field">
            <label>Ghi chÃº</label>
            <div class="help">Rainbow chá»¯ Ä‘Ã£ táº¯t Ä‘á»ƒ khÃ´ng lag Ä‘iá»‡n thoáº¡i ğŸ“±</div>
          </div>
        </div>

        <hr style="border:none;border-top:1px solid var(--line);margin:14px 0">

        <div class="row">
          <div class="field">
            <label>â• ThÃªm tus má»›i</label>
            <input id="tusTitleInput" placeholder="TÃªn tus (vd: Tus AV)" />
            <input id="tusLinkInput" placeholder="DÃ¡n link tus Facebook..." />
            <button class="btn btn-ghost" id="btnAddTusAdmin">â• ThÃªm tus</button>
          </div>

          <div class="field">
            <label>ğŸ“… ThÃªm lá»‹ch báº­n / ráº£nh</label>
            <select id="daySelect"></select>

            <div class="row" style="margin-top:0">
              <div class="field">
                <label>Tá»« giá»</label>
                <input id="fromInput" placeholder="09:00" />
              </div>
              <div class="field">
                <label>Äáº¿n giá»</label>
                <input id="toInput" placeholder="11:30" />
              </div>
            </div>

            <textarea id="taskInput" placeholder="Viá»‡c gÃ¬? (vd: Há»c PRF192 / Ä‘i gym / lÃ m bÃ i...)"></textarea>
            <button class="btn btn-ghost" id="btnAddSlot">â• ThÃªm lá»‹ch</button>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn btn-primary" id="btnSave">ğŸ’¾ LÆ°u cÃ i Ä‘áº·t</button>
        </div>

      </div><!-- /admin-locked -->

    </div>
  </div>

  <script>
    // ====== STATE ======
    const KEY = "milo_site_v2";

    const defaultState = {
      theme: "dark",
      adminPass: "079268",
      isAdmin: false,

      fbLink: "https://www.facebook.com/milo.pha.a",
      discordId: "910327589309145109",

      gameLinks: { roblox:"", valorant:"", tft:"" },

      songName: "Ai ngoÃ i anh",

      intro: [
        "âœ¨ Cháº¡y Ngay Äi",
        "ğŸ» Cháº¡y VÃ o TrÃ¡i Tim Em",
        "ğŸ˜³ ÄÃ¹a ThÃ´i Anh LÃ m GÃ¬ CÃ³ Em"
      ],

      tus: [
        { title: "Tus AV", link: "https://www.facebook.com/" }
      ],

      schedule: {
        "Thá»© 2": [],
        "Thá»© 3": [],
        "Thá»© 4": [],
        "Thá»© 5": [],
        "Thá»© 6": [],
        "Thá»© 7": [],
        "Chá»§ nháº­t": []
      }
    };

    function loadState(){
      try{
        const raw = localStorage.getItem(KEY);
        if(!raw) return structuredClone(defaultState);
        const s = JSON.parse(raw);
        return {
          ...structuredClone(defaultState),
          ...s,
          gameLinks: { ...structuredClone(defaultState.gameLinks), ...(s.gameLinks||{}) },
          schedule: { ...structuredClone(defaultState.schedule), ...(s.schedule||{}) }
        };
      }catch(e){
        return structuredClone(defaultState);
      }
    }
    function saveState(){
      localStorage.setItem(KEY, JSON.stringify(state));
    }

    let state = loadState();

    // ====== HELPERS ======
    const $ = (id)=>document.getElementById(id);

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s=>({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[s]));
    }
    function escapeAttr(str){ return escapeHtml(str); }

    // ====== ELEMENTS ======
    const btnTheme = $("btnTheme");
    const themeText = $("themeText");
    const btnAdmin = $("btnAdmin");

    const adminModal = $("adminModal");
    const adminClose = $("adminClose");

    const adminPassInput = $("adminPassInput");
    const btnLogin = $("btnLogin");
    const btnLogout = $("btnLogout");

    const adminLocked = $("adminLocked");

    const introList = $("introList");
    const gameList = $("gameList");
    const tusList = $("tusList");

    const fbBtn = $("fbBtn");
    const dcBtn = $("dcBtn");
    const songNameEl = $("songName");

    // Admin inputs
    const fbInput = $("fbInput");
    const dcIdInput = $("dcIdInput");
    const robloxInput = $("robloxInput");
    const valoInput = $("valoInput");
    const tftInput = $("tftInput");
    const songInput = $("songInput");
    const newPassInput = $("newPassInput");

    const tusTitleInput = $("tusTitleInput");
    const tusLinkInput = $("tusLinkInput");
    const btnAddTusAdmin = $("btnAddTusAdmin");

    const daySelect = $("daySelect");
    const fromInput = $("fromInput");
    const toInput = $("toInput");
    const taskInput = $("taskInput");
    const btnAddSlot = $("btnAddSlot");

    const btnSave = $("btnSave");

    const btnAddTus = $("btnAddTus");

    const dayTabs = $("dayTabs");
    const daySlots = $("daySlots");
    let activeDay = "Thá»© 2";

    // ====== RENDER ======
    function applyTheme(){
      document.body.classList.toggle("light", state.theme === "light");
      themeText.textContent = state.theme === "light" ? "Light" : "Dark";
    }

    function applyAdminGate(){
      // body class Ä‘á»ƒ effect.css dÃ¹ng (admin-on)
      document.body.classList.toggle("admin-on", !!state.isAdmin);
      // show/hide block trong modal
      adminLocked.style.display = state.isAdmin ? "block" : "none";
    }

    function renderContacts(){
      fbBtn.href = state.fbLink || "#";
      const id = (state.discordId || "").trim();
      dcBtn.href = id ? `https://discord.com/users/${encodeURIComponent(id)}` : "#";
    }

    function renderIntro(){
      introList.innerHTML = "";
      state.intro.forEach(t=>{
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `<div style="font-weight:900">${escapeHtml(t)}</div>`;
        introList.appendChild(div);
      });
    }

    function renderGames(){
      const games = [
        { key:"roblox", icon:"ğŸ•¹ï¸", name:"Roblox", desc:"chill / sandbox", tag:"casual" },
        { key:"valorant", icon:"ğŸ¯", name:"Valorant", desc:"FPS / tryhard", tag:"rank" },
        { key:"tft", icon:"ğŸ§ ", name:"TFT", desc:"auto chess", tag:"brain" }
      ];
      gameList.innerHTML = "";
      games.forEach(g=>{
        const link = state.gameLinks[g.key] || "";
        const row = document.createElement("div");
        row.className = "item";
        row.innerHTML = `
          <div style="display:flex;gap:10px;align-items:center">
            <div style="font-size:18px">${g.icon}</div>
            <div>
              <div style="font-weight:1000">${g.name}</div>
              <div style="color:var(--muted);font-weight:800;font-size:12px">${g.desc}</div>
              ${
                link
                ? `<a href="${escapeAttr(link)}" target="_blank" rel="noopener" style="color:var(--accent);font-weight:900;text-decoration:none">Má»Ÿ link tÃ i khoáº£n</a>`
                : `<div style="color:var(--muted);font-weight:800;font-size:12px">ChÆ°a cÃ³ link</div>`
              }
            </div>
          </div>
          <div class="tag">${g.tag}</div>
        `;
        gameList.appendChild(row);
      });
    }

    function renderTus(){
      tusList.innerHTML = "";
      state.tus.forEach((t, idx)=>{
        const a = document.createElement("a");
        a.className = "tus-link";
        a.href = t.link || "#";
        a.target = "_blank";
        a.rel = "noopener";
        a.innerHTML = `
          <div>ğŸ”— ${escapeHtml(t.title || "Tus")}</div>
          <div style="display:flex;gap:10px;align-items:center">
            ${
              state.isAdmin
              ? `<button class="btn btn-danger" data-del="${idx}" type="button">XoÃ¡</button>`
              : `<span style="color:var(--muted);font-weight:900">Má»Ÿ</span>`
            }
          </div>
        `;
        tusList.appendChild(a);
      });

      if(state.isAdmin){
        tusList.querySelectorAll("[data-del]").forEach(btn=>{
          btn.addEventListener("click", (e)=>{
            e.preventDefault();
            const i = Number(btn.getAttribute("data-del"));
            state.tus.splice(i, 1);
            saveState();
            renderTus();
          });
        });
      }
    }

    function renderScheduleTabs(){
      const days = Object.keys(state.schedule);
      dayTabs.innerHTML = "";

      days.forEach(d=>{
        const b = document.createElement("button");
        b.className = "tab" + (d===activeDay ? " active" : "");
        b.textContent = d;
        b.addEventListener("click", ()=>{
          activeDay = d;
          renderScheduleTabs();
          renderScheduleDay();
        });
        dayTabs.appendChild(b);
      });

      // fill admin select
      daySelect.innerHTML = days.map(d=>`<option value="${escapeAttr(d)}">${escapeHtml(d)}</option>`).join("");
      daySelect.value = activeDay;
    }

    function renderScheduleDay(){
      const items = state.schedule[activeDay] || [];
      daySlots.innerHTML = "";

      if(items.length === 0){
        const p = document.createElement("div");
        p.className = "item";
        p.innerHTML = `<div style="font-weight:900">ğŸ˜´ ChÆ°a cÃ³ lá»‹ch cho ${escapeHtml(activeDay)}.</div>`;
        daySlots.appendChild(p);
        return;
      }

      items.forEach((it, idx)=>{
        const div = document.createElement("div");
        div.className = "slot";
        div.innerHTML = `
          <div class="slot-left">
            <div class="slot-title">${escapeHtml(it.task || "Viá»‡c")}</div>
            <div class="slot-time">â° ${escapeHtml(it.from)} â†’ ${escapeHtml(it.to)}</div>
          </div>
          <div style="display:flex;gap:10px;align-items:center">
            <span class="tag">báº­n</span>
            ${state.isAdmin ? `<button class="btn btn-danger" data-slot-del="${idx}" type="button">XoÃ¡</button>` : ""}
          </div>
        `;
        daySlots.appendChild(div);
      });

      if(state.isAdmin){
        daySlots.querySelectorAll("[data-slot-del]").forEach(btn=>{
          btn.addEventListener("click", ()=>{
            const i = Number(btn.getAttribute("data-slot-del"));
            state.schedule[activeDay].splice(i,1);
            saveState();
            renderScheduleDay();
          });
        });
      }
    }

    function fillAdminForm(){
      fbInput.value = state.fbLink || "";
      dcIdInput.value = state.discordId || "";
      robloxInput.value = state.gameLinks.roblox || "";
      valoInput.value = state.gameLinks.valorant || "";
      tftInput.value = state.gameLinks.tft || "";
      songInput.value = state.songName || "";
      newPassInput.value = "";
    }

    function renderAll(){
      applyTheme();
      applyAdminGate();

      songNameEl.textContent = state.songName || "Nháº¡c";

      renderContacts();
      renderIntro();
      renderGames();
      renderTus();
      renderScheduleTabs();
      renderScheduleDay();
    }

    // ====== EVENTS ======
    btnTheme.addEventListener("click", ()=>{
      state.theme = (state.theme === "light") ? "dark" : "light";
      saveState();
      applyTheme();
    });

    btnAdmin.addEventListener("click", ()=>{
      adminModal.classList.add("show");
      adminPassInput.value = "";
      fillAdminForm();
      applyAdminGate();
      setTimeout(()=>adminPassInput.focus(), 80);
    });

    adminClose.addEventListener("click", ()=> adminModal.classList.remove("show"));
    adminModal.addEventListener("click", (e)=>{
      if(e.target === adminModal) adminModal.classList.remove("show");
    });

    btnLogin.addEventListener("click", ()=>{
      const pass = adminPassInput.value.trim();
      if(pass === state.adminPass){
        state.isAdmin = true;
        saveState();
        applyAdminGate();
        alert("Admin ON âœ…");
      }else{
        alert("Sai máº­t kháº©u ğŸ˜­");
      }
    });

    btnLogout.addEventListener("click", ()=>{
      state.isAdmin = false;
      saveState();
      applyAdminGate();
      alert("ÄÃ£ thoÃ¡t Admin âœ…");
    });

    btnSave.addEventListener("click", ()=>{
      if(!state.isAdmin){
        alert("ÄÄƒng nháº­p Admin trÆ°á»›c ğŸ”’");
        return;
      }

      state.fbLink = fbInput.value.trim();
      state.discordId = dcIdInput.value.trim();

      state.gameLinks.roblox = robloxInput.value.trim();
      state.gameLinks.valorant = valoInput.value.trim();
      state.gameLinks.tft = tftInput.value.trim();

      state.songName = songInput.value.trim() || "Nháº¡c";

      const np = newPassInput.value.trim();
      if(np) state.adminPass = np;

      saveState();
      renderAll();
      alert("ÄÃ£ lÆ°u âœ…ğŸ’¾");
    });

    btnAddTusAdmin.addEventListener("click", ()=>{
      if(!state.isAdmin){
        alert("ÄÄƒng nháº­p Admin trÆ°á»›c ğŸ”’");
        return;
      }
      const title = tusTitleInput.value.trim();
      const link = tusLinkInput.value.trim();
      if(!title || !link){
        alert("Nháº­p Ä‘á»§ TÃªn tus + Link tus ğŸ˜­");
        return;
      }
      state.tus.unshift({ title, link });
      tusTitleInput.value = "";
      tusLinkInput.value = "";
      saveState();
      renderTus();
      alert("ÄÃ£ thÃªm tus âœ…");
    });

    btnAddTus.addEventListener("click", ()=>{
      if(!state.isAdmin){
        alert("Chá»‰ Admin má»›i thÃªm tus ğŸ”’");
        return;
      }
      adminModal.classList.add("show");
      fillAdminForm();
      applyAdminGate();
      setTimeout(()=>{
        tusTitleInput.scrollIntoView({ behavior:"smooth", block:"center" });
        tusTitleInput.focus();
      }, 120);
    });

    btnAddSlot.addEventListener("click", ()=>{
      if(!state.isAdmin){
        alert("ÄÄƒng nháº­p Admin trÆ°á»›c ğŸ”’");
        return;
      }

      const day = daySelect.value;
      const from = fromInput.value.trim();
      const to = toInput.value.trim();
      const task = taskInput.value.trim();

      if(!day || !from || !to || !task){
        alert("Nháº­p Ä‘á»§: ngÃ y + tá»« giá» + Ä‘áº¿n giá» + viá»‡c ğŸ˜­");
        return;
      }

      if(!state.schedule[day]) state.schedule[day] = [];
      state.schedule[day].push({ from, to, task });

      fromInput.value = "";
      toInput.value = "";
      taskInput.value = "";

      activeDay = day;
      saveState();
      renderScheduleTabs();
      renderScheduleDay();
      alert("ÄÃ£ thÃªm lá»‹ch âœ…");
    });

    daySelect.addEventListener("change", ()=>{
      activeDay = daySelect.value;
      renderScheduleTabs();
      renderScheduleDay();
    });

    // block click when empty link
    [fbBtn, dcBtn].forEach(a=>{
      a.
